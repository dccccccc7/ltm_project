{"version":3,"sources":["webpack:///./node_modules/core-js/internals/string-pad.js","webpack:///./node_modules/core-js/internals/string-repeat.js","webpack:///./src/network/Plan/variable.js","webpack:///./src/network/Plan/product.js","webpack:///./src/views/Plan/Distribution.vue?c76f","webpack:///./node_modules/core-js/modules/es.string.pad-start.js","webpack:///./src/network/Plan/CommondForm.js","webpack:///./src/views/Plan/Distribution.vue?3a85","webpack:///src/views/Plan/Distribution.vue","webpack:///./src/views/Plan/Distribution.vue?5a74","webpack:///./src/views/Plan/Distribution.vue","webpack:///./node_modules/core-js/internals/string-pad-webkit-bug.js"],"names":["toLength","repeat","requireObjectCoercible","ceil","Math","createMethod","IS_END","$this","maxLength","fillString","fillLen","stringFiller","S","String","stringLength","length","fillStr","undefined","intMaxLength","call","slice","module","exports","start","end","toInteger","count","str","this","result","n","Infinity","RangeError","user","getProduct","config","instance","axios","create","$","$padStart","WEBKIT_BUG","target","proto","forced","padStart","arguments","request","render","_vm","_h","$createElement","_c","_self","attrs","_v","_s","item","no","product","brand","style","color","quantity","model","value","callback","$$v","expression","on","getPlan","selectProductionLine","_l","desc","id","commit","staticStyle","plan","scopedSlots","_u","key","fn","scope","$event","deletePlan","row","distribute","processesList","_e","staticRenderFns","name","data","$route","query","productionLine","procedureCount","watch","newval","activated","url","params","methods","confirm","val","i","expectedQuantity","product_id","alert","status","deleted","createdBy","component","userAgent","test"],"mappings":"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","file":"static/js/chunk-3be3c8a0.7497957a.js","sourcesContent":["// https://github.com/tc39/proposal-string-pad-start-end\nvar toLength = require('../internals/to-length');\nvar repeat = require('../internals/string-repeat');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\nvar ceil = Math.ceil;\n\n// `String.prototype.{ padStart, padEnd }` methods implementation\nvar createMethod = function (IS_END) {\n  return function ($this, maxLength, fillString) {\n    var S = String(requireObjectCoercible($this));\n    var stringLength = S.length;\n    var fillStr = fillString === undefined ? ' ' : String(fillString);\n    var intMaxLength = toLength(maxLength);\n    var fillLen, stringFiller;\n    if (intMaxLength <= stringLength || fillStr == '') return S;\n    fillLen = intMaxLength - stringLength;\n    stringFiller = repeat.call(fillStr, ceil(fillLen / fillStr.length));\n    if (stringFiller.length > fillLen) stringFiller = stringFiller.slice(0, fillLen);\n    return IS_END ? S + stringFiller : stringFiller + S;\n  };\n};\n\nmodule.exports = {\n  // `String.prototype.padStart` method\n  // https://tc39.github.io/ecma262/#sec-string.prototype.padstart\n  start: createMethod(false),\n  // `String.prototype.padEnd` method\n  // https://tc39.github.io/ecma262/#sec-string.prototype.padend\n  end: createMethod(true)\n};\n","'use strict';\nvar toInteger = require('../internals/to-integer');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\n// `String.prototype.repeat` method implementation\n// https://tc39.github.io/ecma262/#sec-string.prototype.repeat\nmodule.exports = ''.repeat || function repeat(count) {\n  var str = String(requireObjectCoercible(this));\n  var result = '';\n  var n = toInteger(count);\n  if (n < 0 || n == Infinity) throw RangeError('Wrong number of repetitions');\n  for (;n > 0; (n >>>= 1) && (str += str)) if (n & 1) result += str;\n  return result;\n};\n","export const user = \"root\"","import axios from 'axios'\n\n\nexport default function getProduct(config) {\n    const instance = axios.create({\n        // timeout:5000,\n        // baseURL:'http://localhost:8100'\n    })\n\n    return instance(config)\n}","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Distribution.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Distribution.vue?vue&type=style&index=0&lang=css&\"","'use strict';\nvar $ = require('../internals/export');\nvar $padStart = require('../internals/string-pad').start;\nvar WEBKIT_BUG = require('../internals/string-pad-webkit-bug');\n\n// `String.prototype.padStart` method\n// https://tc39.github.io/ecma262/#sec-string.prototype.padstart\n$({ target: 'String', proto: true, forced: WEBKIT_BUG }, {\n  padStart: function padStart(maxLength /* , fillString = ' ' */) {\n    return $padStart(this, maxLength, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","import axios from 'axios'\n\n\nexport default function request(config) {\n    const instance = axios.create({\n        // timeout:5000,\n\n    })\n\n    return instance(config)\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"distribution\"}},[_c('div',[_c('h2',[_vm._v(\"分配生产计划\")]),_c('h3',[_vm._v(\"需求单\")]),_c('ul',[_c('li',[_vm._v(\"单号：\"+_vm._s(_vm.item.no))]),_c('li',[_vm._v(\"品牌：\"+_vm._s(_vm.item.product.brand))]),_c('li',[_vm._v(\"样式：\"+_vm._s(_vm.item.product.style))]),_c('li',[_vm._v(\"颜色：\"+_vm._s(_vm.item.product.color))]),_c('li',[_vm._v(\"数量：\"+_vm._s(_vm.item.quantity))])])]),_c('div',[_c('el-form',{attrs:{\"inline\":true,\"label-width\":\"90px\"}},[_c('el-form-item',{attrs:{\"label\":\"分配数量\"}},[_c('el-input',{attrs:{\"type\":\"number\",\"min\":\"1\"},model:{value:(_vm.quantity),callback:function ($$v) {_vm.quantity=$$v},expression:\"quantity\"}})],1),_c('el-form-item',{attrs:{\"label\":\"生产线\"}},[_c('el-select',{on:{\"change\":_vm.getPlan},model:{value:(_vm.selectProductionLine),callback:function ($$v) {_vm.selectProductionLine=$$v},expression:\"selectProductionLine\"}},_vm._l((_vm.productionLine),function(item){return _c('el-option',{attrs:{\"label\":item.desc,\"value\":item.id}})}),1)],1)],1),_c('div',[_c('el-button',{on:{\"click\":_vm.commit}},[_vm._v(\"提交\")])],1)],1),_c('div',[_c('el-table',{staticStyle:{\"margin-left\":\"50px\",\"width\":\"1270px\"},attrs:{\"data\":_vm.plan,\"border\":\"\"}},[_c('el-table-column',{attrs:{\"prop\":\"no\",\"label\":\"计划单单号\"}}),_c('el-table-column',{attrs:{\"prop\":\"productionLine.id\",\"label\":\"生产线\"}}),_c('el-table-column',{attrs:{\"prop\":\"expectedQuantity\",\"label\":\"分配数量\"}}),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{on:{\"click\":function($event){return _vm.deletePlan(scope.row.id)}}},[_vm._v(\"删除\")])]}}])})],1)],1),_c('div',[_c('el-button',{on:{\"click\":_vm.distribute}},[_vm._v(\"分配\")])],1),(_vm.processesList[0])?_c('div',[_c('p',[_vm._v(\"该生产线负载:共有\"+_vm._s(_vm.processesList.length)+\"条\")]),_c('el-table',{staticStyle:{\"margin-left\":\"50px\",\"width\":\"1270px\"},attrs:{\"data\":_vm.processesList,\"border\":\"\"}},[_c('el-table-column',{attrs:{\"prop\":\"plan.no\",\"label\":\"计划单单号\"}}),_c('el-table-column',{attrs:{\"prop\":\"no\",\"label\":\"过程单单号\"}}),_c('el-table-column',{attrs:{\"prop\":\"step\",\"label\":\"步骤\"}}),_c('el-table-column',{attrs:{\"prop\":\"demandQuantity\",\"label\":\"预期数量\"}}),_c('el-table-column',{attrs:{\"prop\":\"producedQuantity\",\"label\":\"已完成数量\"}})],1)],1):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div id=\"distribution\">\r\n    <div>\r\n      <h2>分配生产计划</h2>\r\n      <h3>需求单</h3>\r\n      <ul>\r\n        <li>单号：{{ item.no }}</li>\r\n        <li>品牌：{{ item.product.brand }}</li>\r\n        <li>样式：{{ item.product.style }}</li>\r\n        <li>颜色：{{ item.product.color }}</li>\r\n        <li>数量：{{ item.quantity }}</li>\r\n      </ul>\r\n    </div>\r\n    <div>\r\n      <el-form :inline=\"true\" label-width=\"90px\">\r\n        <el-form-item label=\"分配数量\">\r\n          <el-input type=\"number\" v-model=\"quantity\" min=\"1\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"生产线\">\r\n          <el-select v-model=\"selectProductionLine\"  @change=\"getPlan\">\r\n            <el-option v-for=\"item in productionLine\" :label=\"item.desc\" :value=\"item.id\"></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n      </el-form>\r\n\r\n      <div>\r\n        <el-button @click=\"commit\">提交</el-button>\r\n      </div>\r\n    </div>\r\n    <div>\r\n      <el-table :data=\"plan\" border style=\"margin-left:50px;width:1270px\">\r\n        <el-table-column prop=\"no\" label=\"计划单单号\"></el-table-column>\r\n        <el-table-column prop=\"productionLine.id\" label=\"生产线\"></el-table-column>\r\n        <el-table-column prop=\"expectedQuantity\" label=\"分配数量\"></el-table-column>\r\n        \r\n        <el-table-column label=\"操作\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button @click=\"deletePlan(scope.row.id)\">删除</el-button>\r\n          </template>  \r\n        </el-table-column>\r\n      </el-table>\r\n      \r\n    </div>\r\n    <div>\r\n      <el-button @click=\"distribute\">分配</el-button>\r\n    </div>\r\n    <div v-if=\"processesList[0]\">\r\n        <p>该生产线负载:共有{{processesList.length}}条</p>\r\n        <el-table :data=\"processesList\" border style=\"margin-left:50px;width:1270px\">\r\n          <el-table-column prop=\"plan.no\" label=\"计划单单号\"></el-table-column>\r\n          <el-table-column prop=\"no\" label=\"过程单单号\"></el-table-column>\r\n          <el-table-column prop=\"step\" label=\"步骤\"></el-table-column>\r\n          <el-table-column prop=\"demandQuantity\" label=\"预期数量\"></el-table-column>\r\n          <el-table-column prop=\"producedQuantity\" label=\"已完成数量\"></el-table-column>\r\n        </el-table>\r\n        \r\n      </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport request from \"../../network/Plan/CommondForm.js\";\r\nimport { user } from \"../../network/Plan/variable.js\";\r\nimport getProduct from \"../../network/Plan/product.js\";\r\n\r\nexport default {\r\n  name: \"Distribution\",\r\n  data() {\r\n    return {\r\n      item: this.$route.query,\r\n      selectProductionLine: \"\",\r\n      productionLine: [],\r\n      processesList: [],\r\n      plan: [],\r\n      quantity: 0,\r\n      procedureCount: 0,\r\n    };\r\n  },\r\n  watch:{\r\n    '$route.query'(newval, oldval) {\r\n      this.item = newval\r\n    }\r\n  },\r\n  activated() {\r\n    request({\r\n      url: \"/demandForm/getDemandFormById\",\r\n      params: {\r\n        id: this.item.id,\r\n      },\r\n    })\r\n      .then((res) => {\r\n        \r\n        let productId = res.data.result.product.id\r\n        console.log(productId);\r\n        request({\r\n          url: \"/demandForm/getLinesByProduct\",\r\n          params: {\r\n            id: productId\r\n          },\r\n        })\r\n          .then((res) => {\r\n            for(let i = 0;i<res.data.result.length;i++){\r\n              let line = res.data.result[i]\r\n              let lineDesc = \"车间名:\"+line.workshopName+\"  生产线名:\"+line.name\r\n              \r\n              line.desc=lineDesc\r\n              this.productionLine.push(line)\r\n            }\r\n            console.log(this.productionLine);\r\n          })\r\n          .catch((err) => {\r\n            console.log(\"错误\");\r\n          });\r\n      })\r\n      .catch((err) => {\r\n        console.log(\"错误\");\r\n      });\r\n    request({\r\n      url: \"/plan/getPlansByDemandForm\",\r\n      params: {\r\n        id: this.item.id,\r\n      },\r\n    })\r\n      .then((res) => {\r\n        this.plan = res.data.result;\r\n      })\r\n      .catch((err) => {\r\n        console.log(\"错误\");\r\n      });\r\n  },\r\n\r\n  methods: {\r\n    deletePlan(val) {\r\n      if (!confirm(\"你要删除？\")) return;\r\n\r\n      request({\r\n        url: \"/plan/deletePlan\",\r\n        params: {\r\n          id: val,\r\n        },\r\n      })\r\n        .then((res) => {\r\n          console.log(res);\r\n          // this.$parent.step();\r\n          request({\r\n            url: \"/plan/getPlansByDemandForm\",\r\n            params: {\r\n              id: this.item.id,\r\n            },\r\n          })\r\n            .then((res) => {\r\n              this.plan = res.data.result;\r\n            })\r\n            .catch((err) => {\r\n              console.log(\"错误\");\r\n            });\r\n        })\r\n        .catch((err) => {\r\n          console.log(\"错误\");\r\n        });\r\n    },\r\n    distribute() {\r\n      let count = 0;\r\n      for (let i = 0; i < this.plan.length; i++) {\r\n        count = count + this.plan[i].expectedQuantity;\r\n      }\r\n\r\n      if (this.item.quantity - count != 0) {\r\n        alert(\"分配未完成\");\r\n        return;\r\n      }\r\n\r\n      if (!confirm(\"确认提交？\")) return;\r\n\r\n      getProduct({\r\n        url: \"/getRoutingInfosByID\",\r\n        params: {\r\n          product_id: this.item.product.id,\r\n        },\r\n      })\r\n        .then((res) => {\r\n          let date = new Date();\r\n          this.procedureCount = res.data.length;\r\n          request({\r\n            url: \"/plan/distributeDemand\",\r\n            params: {\r\n              procedureCount: this.procedureCount,\r\n              id: this.item.id,\r\n              dateStr:\r\n                date.getFullYear() +\r\n                (date.getMonth() + 1).toString().padStart(2, \"0\") +\r\n                date.getDate().toString().padStart(2, \"0\"),\r\n            },\r\n          })\r\n            .then((res) => {\r\n              console.log(\"wafdsfr\");\r\n              this.$router.push(\"/commondform\")\r\n              // this.$router.back(-1)\r\n              this.$router.go(0)\r\n              // this.$parent.step()\r\n            })\r\n            .catch((err) => {\r\n              console.log(\"111\");\r\n            });\r\n        })\r\n        .catch((err) => {\r\n          console.log(\"2222\");\r\n        });\r\n    },\r\n    getPlan() {\r\n      request({\r\n        url: \"/plan/queryLoad\",\r\n        params: {\r\n          id: this.selectProductionLine,\r\n        },\r\n      })\r\n        .then((res) => {\r\n          console.log(this.selectProductionLine);\r\n          let planList = res.data.result;\r\n\r\n          for (let i = 0; i < planList.length; i++) {\r\n            for (let j = 0; j < planList[i].processesList.length; j++) {\r\n              \r\n              let process = planList[i].processesList[j];\r\n              if(process.demandQuantity == process.producedQuantity){\r\n                continue\r\n              }\r\n\r\n              if (!process.plan) {\r\n                process.plan = {};\r\n              }\r\n              process.plan.no = planList[i].no;\r\n              this.processesList.push(process);\r\n            }\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          console.log(\"错误\");\r\n        });\r\n    },\r\n    commit() {\r\n      if (this.selectProductionLine == \"\" || this.quantity < 1) {\r\n        alert(\"数据未填完整\");\r\n        return;\r\n      }\r\n      let count = 0;\r\n      for (let i = 0; i < this.plan.length; i++) {\r\n        count = count + this.plan[i].expectedQuantity;\r\n      }\r\n      if (this.quantity > this.item.quantity - count) {\r\n        alert(\"填写数量过多\");\r\n        return;\r\n      }\r\n\r\n      let date = new Date();\r\n\r\n      request({\r\n        url: \"/plan/savePlan\",\r\n        params: {\r\n          expectedQuantity: this.quantity,\r\n          \"demandForm.id\": this.item.id,\r\n          \"productionLine.id\": this.selectProductionLine,\r\n          no:\r\n            \"18\" +\r\n            date.getFullYear() +\r\n            (date.getMonth() + 1).toString().padStart(2, \"0\") +\r\n            date.getDate().toString().padStart(2, \"0\") +\r\n            Date.now().toString().slice(-8),\r\n          status: \"0\",\r\n          deleted: \"0\",\r\n          createdBy: user,\r\n        },\r\n      })\r\n        .then((res) => {\r\n          console.log(res);\r\n          // this.$parent.step();\r\n          //this.$router.go(0)\r\n          request({\r\n            url: \"/plan/getPlansByDemandForm\",\r\n            params: {\r\n              id: this.item.id,\r\n            },\r\n          })\r\n            .then((res) => {\r\n              console.log(res);\r\n              this.plan = res.data.result;\r\n            })\r\n            .catch((err) => {\r\n              console.log(\"错误\");\r\n            });\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n  ul{\r\n    list-style: none;\r\n  }\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Distribution.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Distribution.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Distribution.vue?vue&type=template&id=6214f56f&\"\nimport script from \"./Distribution.vue?vue&type=script&lang=js&\"\nexport * from \"./Distribution.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Distribution.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","// https://github.com/zloirock/core-js/issues/280\nvar userAgent = require('../internals/engine-user-agent');\n\n// eslint-disable-next-line unicorn/no-unsafe-regex\nmodule.exports = /Version\\/10\\.\\d+(\\.\\d+)?( Mobile\\/\\w+)? Safari\\//.test(userAgent);\n"],"sourceRoot":""}