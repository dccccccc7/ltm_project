(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-44ab3b0a"],{"0ec8":function(e,t,a){},"1bab":function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));a("d3b7");var i=a("bc3a"),n=a.n(i);function o(e){return new Promise((function(t,a){var i=n.a.create({timeout:3e3});i(e).then((function(e){t(e)})).catch((function(e){a(e)}))}))}},4791:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));a("d3b7"),a("4f6c");var i=a("bc3a"),n=a.n(i);function o(e){return new Promise((function(t,a){var i=n.a.create({timeout:45e3});i(e).then((function(e){console.log("成功"),t(e)})).catch((function(e){console.log("失败"),a(e)}))}))}},"4f6c":function(e,t,a){"use strict"},8006:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("keep-alive",[a("baseview")],1)],1)},n=[],o=(a("1bab"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"theBaseMainBox"}},[a("div",{staticStyle:{height:"20px"}}),a("div",{attrs:{id:"theBaseHeader"}},[a("div",{attrs:{id:"theLeftBase"}},[a("el-form",{ref:"formInline",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline,rules:e.rules}},[a("el-form-item",{attrs:{label:"选择信息"}},[a("el-select",{attrs:{placeholder:"选择信息"},on:{change:e.selectChange},model:{value:e.formInline.category,callback:function(t){e.$set(e.formInline,"category",t)},expression:"formInline.category"}},[a("el-option",{attrs:{label:"车间",value:"workshop"}}),a("el-option",{attrs:{label:"产线",value:"line"}})],1)],1),a("el-form-item",{attrs:{label:"查询信息",prop:"info"}},[a("el-input",{attrs:{placeholder:!1===this.showLine?"车间编号/名称":"车间编号/名称+产线编号/名称"},model:{value:e.formInline.info,callback:function(t){e.$set(e.formInline,"info","string"===typeof t?t.trim():t)},expression:"formInline.info"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.search(e.formInline)}}},[e._v("查询")])],1)],1)],1),a("div",{attrs:{id:"theRightBase"}},[a("el-button",{staticStyle:{height:"90%"},attrs:{plain:!0,icon:"el-icon-plus"},on:{click:e.createItem}},[e._v("新建项目")])],1)]),a("div",{staticStyle:{height:"20px"}}),a("div",{attrs:{id:"theBaseMain"}},[e.showLine?a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{id:"theSubTable",data:e.tableLineData,"highlight-current-row":"",stripe:""},on:{"sort-change":e.sortchange}},[a("el-table-column",{attrs:{label:"车间编号",prop:"workshop_id"}}),a("el-table-column",{attrs:{label:"产线编号",prop:"id"}}),a("el-table-column",{attrs:{label:"产线名称",prop:"name",width:"180"}}),a("el-table-column",{attrs:{label:"设备数量",prop:"equipNum"}}),a("el-table-column",{attrs:{label:"工位数量",prop:"stationNum",width:"200px"}}),a("el-table-column",{attrs:{label:"创建日期",prop:"created_time",width:"200px"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{path:"/work/workshop/workshopDetail",query:{workshopId:t.row.workshop_id,workshopNmae:"s"}}}},[a("el-button",{staticStyle:{padding:"8px"},attrs:{type:"text"}},[e._v("查看")])],1)]}}])})],1)],1):a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{id:"theMainTable",data:e.tableData,"highlight-current-row":"",stripe:""},on:{"sort-change":e.sortchange}},[a("el-table-column",{attrs:{label:"车间编号",prop:"id"}}),a("el-table-column",{attrs:{label:"车间名称",prop:"name",width:"180"}}),a("el-table-column",{attrs:{label:"工厂名称",prop:"factory_name"}}),a("el-table-column",{attrs:{label:"产线数量",prop:"lineNum",width:"200px"}}),a("el-table-column",{attrs:{label:"创建日期",prop:"created_time",width:"200px"}}),a("el-table-column",{attrs:{label:"修改日期",prop:"modified_time",width:"200px"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{path:"/work/workshop/workshopDetail",query:{workshopId:t.row.id,workshopName:t.row.name}}}},[a("el-button",{staticStyle:{padding:"8px"},attrs:{type:"text"}},[e._v("查看")])],1)]}}],null,!1,4090980213)})],1)],1),a("div",{staticClass:"block",staticStyle:{padding:"10px"}},[a("el-pagination",{attrs:{"hide-on-single-page":!0,total:e.total,background:"",layout:"total,prev, pager, next, jumper","page-size":e.page.pagesize},on:{"size-change":function(t){e.current,e.change},"prev-click":e.preclick,"next-click":e.nextclick,"current-change":e.curChange}})],1)])])}),r=[],s=(a("c975"),a("b0c0"),a("ac1f"),a("1276"),a("4791")),l={name:"baseview",data:function(){return{total:1,formInline:{category:"workshop",info:""},value:"workshop",page:{pagesize:15,curpage:1},tableData:[],tableLineData:[],workshopItem:"",loading:!1,showLine:!1,path:"",rules:{info:[{required:!0,message:" ",trigger:"blur"},{min:1,message:"信息不可为空",trigger:"blur"}]}}},created:function(){this.getData()},activated:function(){this.$router.push(this.path)},beforeRouteLeave:function(e,t,a){this.path=this.$route.path,a()},methods:{preclick:function(e){this.page.curpage=e,this.loading=!0,this.getData(),this.loading=!1},nextclick:function(e){this.page.curpage=e,this.loading=!0,this.getData(),this.loading=!1},curChange:function(e){var t=this;this.page.curpage=e,this.loading=!0,setTimeout((function(){t.getData(),t.loading=!1}),1e3)},sortchange:function(){var e=this;this.loading=!0,setTimeout((function(){e.loading=!1}),1e3)},selectChange:function(){var e=this;this.loading=!0,setTimeout((function(){e.loading=!1,e.showLine=!e.showLine,e.getData()}),1e3)},search:function(e){var t=this;this.$refs.formInline.validate((function(e){if(!e)return!1;t.getData({type:"search",data:t.formInline.info})}))},handleCommand:function(e){this.sortForm=e,this.$message("click on item "+e)},handleClick:function(e){e.type?this.$router.push({path:"/work/workshop/workshopDetail",query:{workshopId:e.id,workshopName:e.name}}):this.$router.push({path:"/work/workshop/line/lineDetail",query:{lineId:e.id,lineName:e.name}})},createItem:function(){this.$router.push("/test/baseTest/createPro")},getData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"def"};if(this.showLine)if("search"===t.type)if(-1!==t.data.indexOf("+")&&2===t.data.split("+").length&&""!==t.data.split("+")[0]&&""!==t.data.split("+")[1]){this.loading=!0;var a=t.data.split("+"),i={Id:a[0],info:a[1]};this.loading=!0,console.log("搜索",i),Object(s["a"])({url:"line/searchLine",params:i,methods:"get"}).then((function(t){if(console.log("产线查询:",t),!0===t.data.success){var a=[];a.push(t.data.result),e.tableLineData=a,e.total=t.data.total,e.$message({type:"success",message:"查询成功"})}else e.$message.error("查无此记录")})).catch((function(t){e.$message.error("服务器异常")})),this.loading=!1,this.formInline.info=""}else this.$message({type:"info",message:"请输入正确格式"});else{var n={currentPage:this.page.curpage,pagesize:this.page.pagesize};this.loading=!0,Object(s["a"])({url:"line/searchLineItem",params:n,methods:"get"}).then((function(t){console.log("产线新细",t),e.tableLineData=t.data.result.records,e.total=t.data.result.total})).catch((function(t){e.$message.error("服务器异常")})),this.loading=!1}else if("search"===t.type){this.loading=!0;var o={info:t.data};Object(s["a"])({url:"workshop/searchWorkshop",params:o,methods:"get"}).then((function(t){if(!0===t.data.success){e.$message({type:"success",message:"查询成功"}),console.log("查询结果",t);var a=[];a.push(t.data.result),e.tableData=a,e.total=t.data.total,e.loading=!1}else e.$message.error("暂未查询到此记录")})).catch((function(t){e.$message.error("服务器异常")})),this.formInline.info="",this.loading=!1}else{var r={currentPage:this.page.curpage,pagesize:this.page.pagesize};this.loading=!0,Object(s["a"])({url:"workshop/workshopItem",params:r,methods:"get"}).then((function(t){console.log("凡回家过",t),"操作成功！"===t.data.message?(e.tableData=t.data.result.records,e.total=t.data.total):e.$message.error(t.data.message)})).catch((function(t){e.$message.error("服务器异常")})),this.loading=!1}}}},c=l,h=(a("cf2f"),a("2877")),u=Object(h["a"])(c,o,r,!1,null,"74d1af5a",null),p=u.exports,d={name:"theWorkshopMain",components:{baseview:p},data:function(){return{workshopItem:""}},created:function(){},methods:{}},g=d,f=Object(h["a"])(g,i,n,!1,null,"ef6c3040",null);t["default"]=f.exports},c975:function(e,t,a){"use strict";var i=a("23e7"),n=a("4d64").indexOf,o=a("a640"),r=a("ae40"),s=[].indexOf,l=!!s&&1/[1].indexOf(1,-0)<0,c=o("indexOf"),h=r("indexOf",{ACCESSORS:!0,1:0});i({target:"Array",proto:!0,forced:l||!c||!h},{indexOf:function(e){return l?s.apply(this,arguments)||0:n(this,e,arguments.length>1?arguments[1]:void 0)}})},cf2f:function(e,t,a){"use strict";var i=a("0ec8"),n=a.n(i);n.a}}]);
//# sourceMappingURL=chunk-44ab3b0a.eb8da6c7.js.map