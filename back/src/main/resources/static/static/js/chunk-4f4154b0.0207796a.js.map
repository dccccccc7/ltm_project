{"version":3,"sources":["webpack:///./src/views/production_process/procedure/List.vue?3d94","webpack:///./src/network/request.js","webpack:///./src/views/production_process/procedure/Edit.vue?62bd","webpack:///./src/views/production_process/procedure/List.vue?31e8","webpack:///./src/views/production_process/procedure/Edit.vue?bbfc","webpack:///src/views/production_process/procedure/Edit.vue","webpack:///./src/views/production_process/procedure/Edit.vue?426f","webpack:///./src/views/production_process/procedure/Edit.vue","webpack:///src/views/production_process/procedure/List.vue","webpack:///./src/views/production_process/procedure/List.vue?71ad","webpack:///./src/views/production_process/procedure/List.vue"],"names":["request","config","Promise","resolve","reject","instance","axios","create","timeout","then","res","catch","err","render","_vm","this","_h","$createElement","_c","_self","attrs","procedures","scopedSlots","_u","key","fn","scope","on","$event","showEdit","row","del","$index","currentPage","size","count","handleSizeChange","handleCurrentChange","ref","isShowEdit","handleClose","procedure_id","$refs","detailDrawer","changeCommit","staticRenderFns","model","value","procedure","callback","$$v","$set","expression","status","required","message","trigger","costRules","cancel","_v","commit","name","props","data","Error","methods","getData","url","method","params","console","log","$confirm","confirmButtonText","cancelButtonText","type","comments","cost","operator_id","closeDrawer","created","component","isCommit","val","getProcedure","pageOffset","pageSize","done","components","editPage","activated"],"mappings":"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","file":"static/js/chunk-4f4154b0.0207796a.js","sourcesContent":["import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./List.vue?vue&type=style&index=0&id=ea996a7e&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./List.vue?vue&type=style&index=0&id=ea996a7e&scoped=true&lang=css&\"","import axios from 'axios'\n\n// axios.interceptors.request.use(config => {\n//   console.log(config)\n//   // 必须返回请求，否则后端无法获得\n//   return config\n// }, err => {\n//   console.log(err)\n// })\n\nexport function request(config) {\n    return new Promise(((resolve, reject) => {\n\n        const instance = axios.create({\n            timeout: 3000,\n        });\n\n        instance(config).then(res => {\n            resolve(res);\n        }).catch(err => {\n            reject(err);\n        })\n    }))\n}\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Edit.vue?vue&type=style&index=0&id=0ccf10e6&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Edit.vue?vue&type=style&index=0&id=0ccf10e6&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"list-base\"}},[_c('div',{attrs:{\"id\":\"list-main\"}},[_c('el-table',{attrs:{\"data\":_vm.procedures,\"border\":\"\"}},[_c('el-table-column',{attrs:{\"prop\":\"procedure_id\",\"label\":\"id\",\"width\":\"200\",\"align\":\"center\",\"show-overflow-tooltip\":true}}),_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":\"名称\",\"width\":\"150\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"prop\":\"cost\",\"label\":\"成本\",\"width\":\"100\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"prop\":\"status\",\"label\":\"状态\",\"width\":\"100\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"prop\":\"comments\",\"label\":\"产品描述\",\"width\":\"200\",\"align\":\"center\",\"show-overflow-tooltip\":true}}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"id\":\"tool\",\"width\":\"200\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"primary\",\"circle\":\"\",\"size\":\"mini\",\"icon\":\"el-icon-edit\"},on:{\"click\":function($event){return _vm.showEdit(scope.row)}}}),_c('el-button',{attrs:{\"type\":\"danger\",\"circle\":\"\",\"size\":\"mini\",\"icon\":\"el-icon-delete\"},on:{\"click\":function($event){return _vm.del(scope.$index, scope.row)}}})]}}])})],1)],1),_c('div',{attrs:{\"id\":\"list-page\"}},[_c('el-pagination',{attrs:{\"current-page\":_vm.currentPage,\"page-sizes\":[5, 10, 15],\"page-size\":_vm.size,\"pager-count\":5,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.count},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}}),_c('el-drawer',{ref:\"detailDrawer\",attrs:{\"title\":\"编辑\",\"visible\":_vm.isShowEdit,\"size\":\"40%\",\"destroy-on-close\":true,\"before-close\":_vm.handleClose},on:{\"update:visible\":function($event){_vm.isShowEdit=$event}}},[_c('edit-page',{attrs:{\"procedure_id\":_vm.procedure_id,\"detailDrawer\":_vm.$refs.detailDrawer,\"changeCommit\":_vm.changeCommit}})],1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-form',{attrs:{\"id\":\"edit-base\",\"label-width\":\"60px\"}},[_c('el-card',[_c('el-form-item',{attrs:{\"label\":\"产品id\"}},[_c('el-input',{attrs:{\"disabled\":true},model:{value:(_vm.procedure.procedure_id),callback:function ($$v) {_vm.$set(_vm.procedure, \"procedure_id\", $$v)},expression:\"procedure.procedure_id\"}})],1),_c('el-form-item',{attrs:{\"label\":\"状态\",\"prop\":_vm.procedure.status,\"rules\":{required: true, message: '请填写工序状态', trigger: 'blur'}}},[_c('el-input',{attrs:{\"placeholder\":\"请输入工序状态\",\"maxlength\":\"5\",\"show-word-limit\":\"\"},model:{value:(_vm.procedure.status),callback:function ($$v) {_vm.$set(_vm.procedure, \"status\", $$v)},expression:\"procedure.status\"}})],1),_c('el-form-item',{attrs:{\"label\":\"成本\",\"rules\":_vm.costRules}},[_c('el-input-number',{attrs:{\"placeholder\":\"请输入成本\",\"precision\":2,\"controls\":false},model:{value:(_vm.procedure.cost),callback:function ($$v) {_vm.$set(_vm.procedure, \"cost\", $$v)},expression:\"procedure.cost\"}})],1),_c('el-form-item',{attrs:{\"label\":\"描述\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"placeholder\":\"请输入工序描述\",\"maxlength\":\"45\",\"show-word-limit\":\"\"},model:{value:(_vm.procedure.comments),callback:function ($$v) {_vm.$set(_vm.procedure, \"comments\", $$v)},expression:\"procedure.comments\"}})],1)],1),_c('el-form-item',[_c('el-button',{on:{\"click\":_vm.cancel}},[_vm._v(\"取消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.commit}},[_vm._v(\"提交\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <el-form id=\"edit-base\" label-width=\"60px\">\n    <el-card>\n      <el-form-item label=\"产品id\">\n        <el-input v-model=\"procedure.procedure_id\" :disabled=\"true\"></el-input>\n      </el-form-item>\n\n      <el-form-item label=\"状态\" :prop=\"procedure.status\"\n                    :rules=\"{required: true, message: '请填写工序状态', trigger: 'blur'}\">\n        <el-input placeholder=\"请输入工序状态\" v-model=\"procedure.status\" maxlength=\"5\" show-word-limit></el-input>\n      </el-form-item>\n\n      <el-form-item label=\"成本\" :rules=\"costRules\">\n        <el-input-number v-model=\"procedure.cost\" placeholder=\"请输入成本\"\n                         :precision=\"2\" :controls=\"false\"></el-input-number>\n      </el-form-item>\n\n      <el-form-item label=\"描述\">\n        <el-input type=\"textarea\" placeholder=\"请输入工序描述\" v-model=\"procedure.comments\" maxlength=\"45\" show-word-limit></el-input>\n      </el-form-item>\n    </el-card>\n\n    <el-form-item>\n      <el-button @click=\"cancel\">取消</el-button>\n      <el-button type=\"primary\" @click=\"commit\">提交</el-button>\n    </el-form-item>\n  </el-form>\n</template>\n\n<script>\nimport {request} from \"@/network/request\";\n\nexport default {\n  name: \"edit\",\n  props: ['procedure_id', 'detailDrawer', 'changeCommit'],\n  data() {\n    let checkCost = (rule, value, callback) => {\n      if (!value) {\n        return callback(new Error('请填写成本'))\n      } else {\n        if (value <= 0) {\n          callback(new Error('成本必须大于0'));\n        } else {\n          callback();\n        }\n      }\n    };\n    return {\n      procedure: {},\n      costRules: [\n        {validator: checkCost, trigger: 'blur'}\n      ]\n    }\n  },\n  methods: {\n    // 页面初始化获取数据\n    getData() {\n      request({\n        url: '/process/getProcedureInfoByID',\n        method: 'get',\n        params: {\n          procedure_id: this.procedure_id\n        }\n      }).then(res => {\n        this.procedure = res.data\n      }).catch(err => {\n        console.log(err)\n      });\n    },\n\n    // 提交修改\n    commit() {\n      this.$confirm(\"是否提交本次修改？\", '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        request({\n          url: '/process/updateProcedureByID',\n          method: 'post',\n          data: {\n            procedure_id: this.procedure.procedure_id,\n            status: this.procedure.status,\n            comments: this.procedure.comments,\n            cost: this.procedure.cost,\n            operator_id: this.$store.getters.userinfo.id\n          }\n        }).then(res => {\n          console.log(res.data)\n          if (res.data != \"更新失败\") {\n            this.changeCommit()\n            this.detailDrawer.closeDrawer()\n            this.$message({\n              type: 'success',\n              message: '修改成功'\n            })\n          } else {\n            this.$message({\n              type: 'error',\n              message: res.data\n            })\n          }\n        }).catch(err => {\n          this.$message({\n            type: 'error',\n            message: '网络错误，修改失败'\n          })\n        });\n      })\n    },\n\n    // 取消修改\n    cancel() {\n      this.detailDrawer.closeDrawer()\n    }\n  },\n  created() {\n    this.getData()\n  }\n}\n</script>\n\n<style scoped>\n#edit-base {\n  overflow-y: auto;\n  position: absolute;\n  width: 100%;\n  height: 85%;\n}\n#edit-product {\n  text-align: left;\n  margin-left: 20px;\n  margin-right: 20px;\n}\n#edit-process {\n  text-align: left;\n  margin-left: 20px;\n  margin-right: 20px;\n}\n#edit-process .el-card {\n  margin-bottom: 5px;\n}\n#edit-material {\n  text-align: left;\n  margin-left: 20px;\n  margin-right: 20px;\n}\n#edit-material .el-card {\n  margin-bottom: 5px;\n}\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Edit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Edit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Edit.vue?vue&type=template&id=0ccf10e6&scoped=true&\"\nimport script from \"./Edit.vue?vue&type=script&lang=js&\"\nexport * from \"./Edit.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Edit.vue?vue&type=style&index=0&id=0ccf10e6&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0ccf10e6\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div id=\"list-base\">\n\n    <div id=\"list-main\">\n      <el-table :data=\"procedures\" border>\n        <el-table-column prop=\"procedure_id\" label=\"id\" width=\"200\" align=\"center\" :show-overflow-tooltip=\"true\"></el-table-column>\n        <el-table-column prop=\"name\" label=\"名称\" width=\"150\" align=\"center\"></el-table-column>\n        <el-table-column prop=\"cost\" label=\"成本\" width=\"100\" align=\"center\"></el-table-column>\n        <el-table-column prop=\"status\" label=\"状态\" width=\"100\" align=\"center\"></el-table-column>\n        <el-table-column prop=\"comments\" label=\"产品描述\" width=\"200\" align=\"center\" :show-overflow-tooltip=\"true\"></el-table-column>\n        <el-table-column label=\"操作\" id=\"tool\" width=\"200\" align=\"center\">\n          <template slot-scope=\"scope\">\n            <el-button type=\"primary\" circle size=\"mini\" icon=\"el-icon-edit\" @click=\"showEdit(scope.row)\"></el-button>\n            <el-button type=\"danger\" circle size=\"mini\" icon=\"el-icon-delete\" @click=\"del(scope.$index, scope.row)\"></el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n    </div>\n\n    <div id=\"list-page\">\n      <el-pagination\n          @size-change=\"handleSizeChange\"\n          @current-change=\"handleCurrentChange\"\n          :current-page=\"currentPage\"\n          :page-sizes=\"[5, 10, 15]\"\n          :page-size=\"size\"\n          :pager-count=\"5\"\n          layout=\"total, sizes, prev, pager, next, jumper\"\n          :total=\"count\">\n      </el-pagination>\n\n      <el-drawer ref=\"detailDrawer\" title=\"编辑\" :visible.sync=\"isShowEdit\" size=\"40%\" :destroy-on-close=\"true\" :before-close=\"handleClose\">\n        <edit-page :procedure_id=\"procedure_id\" :detailDrawer=\"$refs.detailDrawer\" :changeCommit=\"changeCommit\"></edit-page>\n      </el-drawer>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {request} from \"@/network/request\";\nimport editPage from \"./Edit\"\n\nexport default {\n  name: \"List\",\n  data() {\n    return {\n      currentPage: 1,\n      size: 5,\n      isCommit: false,\n      count: 0,\n      procedures: [],\n      procedure_id: '',\n      isShowEdit: false\n    }\n  },\n  methods: {\n    handleSizeChange(val) {\n      this.size = val\n      this.getProcedure(this.currentPage, val)\n    },\n\n    handleCurrentChange(val) {\n      this.currentPage = val\n      this.getProcedure(val, this.size)\n    },\n\n    getProcedure(currentPage, size) {\n      request({\n        url: '/process/getProceduresInfo',\n        method: 'get',\n        params: {\n          pageOffset: currentPage,\n          pageSize: size\n        }\n      }).then(res => {\n        this.count = res.data.count\n        this.procedures = res.data.procedures\n      }).catch(err => {\n        console.log(err)\n      });\n    },\n\n    del(index, row) {\n      this.$confirm(\"是否删除该工序？\", '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        request({\n          url: '/process/deleteProcedureByID',\n          method: 'post',\n          data: {\n            procedure_id: row.procedure_id,\n            operator_id: 'CM'\n          }\n        }).then(res => {\n          if (res.data == \"删除成功\") {\n            this.getProcedure(this.currentPage, this.size)\n            this.$message({\n              type: 'success',\n              message: '删除成功'\n            })\n          } else {\n            this.$message({\n              type: 'error',\n              message: res.data\n            })\n          }\n        }).catch(err => {\n          this.$message({\n            type: 'error',\n            message: '网络错误，删除失败'\n          })\n        });\n      })\n    },\n\n    showEdit(row) {\n      this.procedure_id = row.procedure_id\n      this.isShowEdit = true\n    },\n\n    handleClose(done) {\n      if (!this.isCommit) {\n        this.$confirm(\"关闭后会丢失本次修改，是否关闭？\").then(() => {\n          done()\n        }).catch(() => {\n\n        })\n      }\n      else {\n        this.getProcedure(this.currentPage, this.size)\n        done()\n      }\n      this.isCommit = false\n    },\n\n    changeCommit() {\n      this.isCommit = true\n    }\n\n  },\n  components: {\n    editPage\n  },\n  created() {\n    this.getProcedure(this.currentPage, this.size)\n  },\n  activated() {\n    this.getProcedure(this.currentPage, this.size)\n  }\n}\n</script>\n\n<style scoped>\n#list-base {\n  padding: 50px 50px 0px 50px;\n}\n#tool {\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n}\n#list-page {\n  margin-top: 20px;\n}\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./List.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./List.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./List.vue?vue&type=template&id=ea996a7e&scoped=true&\"\nimport script from \"./List.vue?vue&type=script&lang=js&\"\nexport * from \"./List.vue?vue&type=script&lang=js&\"\nimport style0 from \"./List.vue?vue&type=style&index=0&id=ea996a7e&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ea996a7e\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}