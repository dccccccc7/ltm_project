(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5d14d45f","chunk-41fa6ed8"],{"0421":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mainAdd"},[a("el-form",{ref:"storage",staticClass:"demo-dynamic",attrs:{model:e.storage,"label-width":"100px"}},[a("el-form-item",{attrs:{prop:"storage_id",label:"库区    :  ",rules:[{required:!0,message:"请输入库区编号",trigger:"blur"}]}},[a("el-input",{staticClass:"upupup",attrs:{placeholder:"请输入库区编号"},model:{value:e.storage.storage_id,callback:function(t){e.$set(e.storage,"storage_id","string"===typeof t?t.trim():t)},expression:"storage.storage_id"}})],1),e._l(e.storage.shelfs,(function(t,n){return a("el-form-item",{attrs:{label:"货架"+n+"    :",prop:"shelfs."+n+".shelf_id",rules:{required:!0,message:"货架编号不可为空",trigger:"blur"}}},[a("el-input",{attrs:{placeholder:"请输入货架编号"},model:{value:t.shelf_id,callback:function(a){e.$set(t,"shelf_id","string"===typeof a?a.trim():a)},expression:"domain.shelf_id"}}),a("el-button",{on:{click:function(a){return a.preventDefault(),e.removeDomain(t)}}},[e._v("删除")])],1)})),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("storage")}}},[e._v("创建")]),a("el-button",{on:{click:e.addDomain}},[e._v("增加货架")]),a("el-button",{on:{click:function(t){return e.resetForm("storage")}}},[e._v("重置")])],1)],2)],1)},s=[],r=(a("c975"),a("a434"),a("4791")),o=(a("63ff"),{name:"increSector",data:function(){return{storage:{shelfs:[],user:"",storage_id:""}}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;var a=t.storage;a.user=t.$store.getters.userinfo.id,console.log(a),Object(r["a"])({url:"storage/create",method:"post",data:a}).then((function(e){!0===e.data.success?t.$message({type:"success",message:"创建成功"}):t.$message.error("创建失败")})).catch((function(e){t.$message.error("服务器异常")})),console.log(t.storage)}))},resetForm:function(e){this.$refs[e].resetFields()},removeDomain:function(e){var t=this.storage.shelfs.indexOf(e);-1!==t&&this.storage.shelfs.splice(t,1)},addDomain:function(){this.storage.shelfs.push({shelf_id:""})}}}),i=o,l=(a("0757"),a("2877")),c=Object(l["a"])(i,n,s,!1,null,"4850b8d1",null);t["default"]=c.exports},"05be":function(e,t,a){"use strict";var n=a("be36"),s=a.n(n);s.a},"0757":function(e,t,a){"use strict";var n=a("e4f3"),s=a.n(n);s.a},"0fb5":function(e,t,a){},"1bab":function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));a("d3b7");var n=a("bc3a"),s=a.n(n);function r(e){return new Promise((function(t,a){var n=s.a.create({timeout:3e3});n(e).then((function(e){t(e)})).catch((function(e){a(e)}))}))}},4791:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));a("d3b7"),a("4f6c");var n=a("bc3a"),s=a.n(n);function r(e){return new Promise((function(t,a){var n=s.a.create({timeout:45e3});n(e).then((function(e){console.log("成功"),t(e)})).catch((function(e){console.log("失败"),a(e)}))}))}},"4f6c":function(e,t,a){"use strict"},"63ff":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"mainAdd",staticStyle:{"align-items":"flex-start",width:"37.5%"}},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"库区"===e.select?"库区编号":"库区编号+货架编号"},model:{value:e.searchInput,callback:function(t){e.searchInput="string"===typeof t?t.trim():t},expression:"searchInput"}},[a("el-select",{staticStyle:{width:"80px"},attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.select,callback:function(t){e.select=t},expression:"select"}},[a("el-option",{attrs:{label:"库区",value:"库区"}}),a("el-option",{attrs:{label:"货架",value:"编号"}})],1)],1),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")])],1),a("router-view")],1)},s=[],r=(a("4791"),a("d3e0"),{name:"shelfManage",data:function(){return{select:"库区",showSearchSectorInfo:!1,showSearchShelfInfo:!1,searchInput:""}},methods:{search:function(){console.log(this.searchInput),this.$router.push({path:"/storehouse/storageMain/ShelfInfo",query:{sectorId:this.searchInput}})}}}),o=r,i=(a("c141"),a("2877")),l=Object(i["a"])(o,n,s,!1,null,"2a6f54e3",null);t["a"]=l.exports},a434:function(e,t,a){"use strict";var n=a("23e7"),s=a("23cb"),r=a("a691"),o=a("50c4"),i=a("7b0b"),l=a("65f0"),c=a("8418"),u=a("1dde"),f=a("ae40"),d=u("splice"),h=f("splice",{ACCESSORS:!0,0:0,1:2}),g=Math.max,p=Math.min,m=9007199254740991,b="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!d||!h},{splice:function(e,t){var a,n,u,f,d,h,v=i(this),y=o(v.length),x=s(e,y),_=arguments.length;if(0===_?a=n=0:1===_?(a=0,n=y-x):(a=_-2,n=p(g(r(t),0),y-x)),y+a-n>m)throw TypeError(b);for(u=l(v,n),f=0;f<n;f++)d=x+f,d in v&&c(u,f,v[d]);if(u.length=n,a<n){for(f=x;f<y-n;f++)d=f+n,h=f+a,d in v?v[h]=v[d]:delete v[h];for(f=y;f>y-n+a;f--)delete v[f-1]}else if(a>n)for(f=y-n;f>x;f--)d=f+n-1,h=f+a-1,d in v?v[h]=v[d]:delete v[h];for(f=0;f<a;f++)v[f+x]=arguments[f+2];return v.length=y-n+a,u}})},be36:function(e,t,a){},c141:function(e,t,a){"use strict";var n=a("0fb5"),s=a.n(n);s.a},c975:function(e,t,a){"use strict";var n=a("23e7"),s=a("4d64").indexOf,r=a("a640"),o=a("ae40"),i=[].indexOf,l=!!i&&1/[1].indexOf(1,-0)<0,c=r("indexOf"),u=o("indexOf",{ACCESSORS:!0,1:0});n({target:"Array",proto:!0,forced:l||!c||!u},{indexOf:function(e){return l?i.apply(this,arguments)||0:s(this,e,arguments.length>1?arguments[1]:void 0)}})},d3e0:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{width:"80%",height:"80%",margin:"10px auto 0"}},[a("div",{staticStyle:{width:"100%",height:"40px","margin-bottom":"10px",display:"flex","justify-content":"flex-start"}},[a("div",{staticStyle:{width:"100%",height:"auto",display:"flex","justify-content":"start"}},[a("el-form",{ref:"input",staticClass:"demo-dynamic",attrs:{model:e.input,"label-width":"100px"}},[a("el-form-item",{attrs:{prop:"input",label:"库区编号",rules:[]}},[a("el-input",{model:{value:e.input.input,callback:function(t){e.$set(e.input,"input","string"===typeof t?t.trim():t)},expression:"input.input"}})],1)],1),a("el-button",{on:{click:function(t){return e.submitForm("input")}}},[e._v("搜索")])],1)]),a("div",{staticStyle:{width:"auto",height:"auto"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{label:"库区编号",prop:"id"}}),a("el-table-column",{attrs:{label:"创建时间",prop:"created_time"}}),a("el-table-column",{attrs:{label:"创建人",prop:"created_by"}}),a("el-table-column",{attrs:{label:"货架数量",prop:"shelf_Num"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return e.handleSearch(t.$index,t.row)}}},[e._v("查看 ")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除 ")])]}}])})],1),a("div",{staticClass:"block",staticStyle:{padding:"10px","margin-top":"10px"}},[a("el-pagination",{attrs:{"hide-on-single-page":!0,total:e.total,background:"",layout:"total,prev, pager, next, jumper","page-size":e.page.pages},on:{"prev-click":e.preclick,"next-click":e.nextclick,"current-change":e.curChange}})],1)],1)])},s=[],r=a("4791"),o=(a("1bab"),{name:"tableSector",data:function(){return{loading:!1,page:{pages:10,current:1},total:1,show:!1,incrementShelfFlag:!1,addShelfInfo:{shelf_id:""},input:{input:""},tableData:[{id:"12987121",shelf_Num:"129",created_time:"2018-29-29",created_by:"高某人"}]}},created:function(){console.log("sector----",this.$route.query),this.getData()},methods:{preclick:function(e){var t=this;this.page.current=e,this.loading=!0,setTimeout((function(){t.getData(),t.loading=!1}),1e3)},nextclick:function(e){var t=this;this.page.current=e,this.loading=!0,setTimeout((function(){t.getData(),t.loading=!1}),1e3)},curChange:function(e){var t=this;this.page.current=e,this.loading=!0,setTimeout((function(){t.getData(),t.loading=!1}),1e3)},getData:function(){var e=this,t={current:this.page.current,pages:this.page.pages};this.loading=!0,Object(r["a"])({url:"storage/storageItem",methods:"get",params:t}).then((function(t){console.log("tableSector的getData：res",t),!0===t.data.success?(console.log("???"),e.tableData=t.data.result.records,e.total=t.data.result.total):e.$message.error("查询失败")})).catch((function(t){console.log("store查询所有信息 getdata：err",t),e.$message.error("服务器异常")})),this.loading=!1},handleSearch:function(e,t){this.$router.push({path:"/storehouse/storageMain/ShelfInfo",query:{storage_id:t.id}})},handleClose:function(e){this.$confirm("确认关闭？").then((function(t){e()})).catch((function(e){}))},handleDelete:function(e,t){var a=this;console.log(e,t);var n={storage_id:t.id,user:this.$store.getters.userinfo.id};this.loading=!0,console.log(n,"req"),Object(r["a"])({url:"storage/delete",methods:"get",params:n}).then((function(e){console.log("删除的res",e),!0===e.data.success?a.$message({type:"success",message:"删除成功"}):a.$message.error("删除失败"),a.getData()})).catch((function(e){console.log("删除库区的err",e),a.$message.error("服务器异常")})),this.loading=!1},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;if(""===t.input.input)t.getData();else{var a={storage_id:t.input.input};t.loading=!0,console.log("查询某条库区的req：",a),Object(r["a"])({url:"storage/search",method:"get",params:a}).then((function(e){if(console.log("查询某条库区的res：",e),!0===e.data.success){var a=[];a.push(e.data.result),t.tableData=a,t.$message({type:"success",message:"查询成功"})}else t.$message.error("查询失败");t.show=!0})).catch((function(e){console.log("查询某条库区的err",e),t.$message.error("服务器异常")})),t.show=!0,t.loading=!1}}))},resetForm:function(e){this.$refs[e].resetFields()}}}),i=o,l=(a("05be"),a("2877")),c=Object(l["a"])(i,n,s,!1,null,"7bd39cc2",null);t["default"]=c.exports},e4f3:function(e,t,a){}}]);
//# sourceMappingURL=chunk-5d14d45f.431d9a20.js.map