(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-64148fae"],{"07c3":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{display:"flex","justify-content":"center","align-items":"center"}},[a("el-input",{staticStyle:{width:"50%","margin-right":"10px"},attrs:{placeholder:"","prefix-icon":"el-icon-search",size:"small",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchClick(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.searchClick}},[e._v("搜索")])],1)},n=[],c={name:"SearchBar",data:function(){return{keywords:"",qualityForm:[],cardLoading:[]}},methods:{searchClick:function(){this.$emit("onSearch")}}},r=c,s=a("2877"),l=Object(s["a"])(r,i,n,!1,null,"3c5b0038",null);t["a"]=l.exports},"1bab":function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));a("d3b7");var i=a("bc3a"),n=a.n(i);function c(e){return new Promise((function(t,a){var i=n.a.create({timeout:3e3});i(e).then((function(e){t(e)})).catch((function(e){a(e)}))}))}},"1fe0":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-aside",{staticStyle:{width:"200px","margin-top":"2%"}},[a("switch"),a("defect-side-menu",{ref:"sideMenu",on:{indexSelect:e.listByCategory}})],1),a("el-main",{staticStyle:{"margin-left":"5%"}},[a("defect-all",{ref:"formArea",staticClass:"form-area"})],1)],1)},n=[],c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("search-bar",{ref:"searchBar",staticClass:"searchBar",on:{onSearch:e.searchResult}}),a("el-row",{staticClass:"el-row1"},[e._l(e.defectForm.slice((e.currentPage-1)*e.pagesize,e.currentPage*e.pagesize),(function(t){return a("el-tooltip",{key:t.defectCode,attrs:{effect:"transparent",placement:"bottom"}},[a("el-card",{staticClass:"card",attrs:{bodyStyle:"padding:10px",shadow:"hover"}},[a("div",{staticClass:"info"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{float:"left"}},[e._v("瑕疵代号："+e._s(t.defectCode))]),a("span",[a("i",{staticClass:"el-icon-delete",on:{click:function(a){return e.deleteDefect(t.defectCode)}}})]),a("span",{staticStyle:{float:"right","margin-right":"10px"}},[a("i",{staticClass:"el-icon-edit",on:{click:function(a){return e.editDefect(t)}}})])]),a("div",{staticClass:"text item"},[a("el-divider"),a("p",[e._v("类别："+e._s(t.classification))]),a("p",[e._v("描述："+e._s(t.defectType))])],1)])])],1)})),a("defect-form",{ref:"edit",on:{onSubmit:function(t){return e.loadDefects()}}})],2),a("el-row",[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pagesize,total:e.defectForm.length,"hide-on-single-page":!0},on:{"current-change":e.handleCurrentChange}})],1)],1)},r=[],s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("i",{staticClass:"el-icon-circle-plus-outline",on:{click:function(t){e.dialogFormVisible=!0}}}),a("el-dialog",{attrs:{title:"添加/修改瑕疵",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.clear}},[a("el-form",{ref:"dataForm",attrs:{model:e.defectForm,rules:e.rules,"label-width":"100px",size:"large"}},[a("el-form-item",{attrs:{label:"瑕疵分类",prop:"classification"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择"},model:{value:e.defectForm.classification,callback:function(t){e.$set(e.defectForm,"classification",t)},expression:"defectForm.classification"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"瑕疵代号",prop:"defectCode"}},[a("el-input",{staticStyle:{width:"100%"},model:{value:e.defectForm.defectCode,callback:function(t){e.$set(e.defectForm,"defectCode",t)},expression:"defectForm.defectCode"}})],1),a("el-form-item",{attrs:{label:"瑕疵描述",prop:"defectType"}},[a("el-input",{staticStyle:{width:"100%"},model:{value:e.defectForm.defectType,callback:function(t){e.$set(e.defectForm,"defectType",t)},expression:"defectForm.defectType"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.onCancel()}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit()}}},[e._v("确 定")])],1)],1)],1)},l=[],o=a("1bab"),d={name:"defectForm",data:function(){return{dialogFormVisible:!1,defectForm:{classification:"",defectCode:"",defectType:""},options:[{value:"安全与监管",label:"安全与监管"},{value:"材料",label:"材料"},{value:"清洁度",label:"清洁度"},{value:"制作",label:"制作"},{value:"组件和修剪",label:"组件和修剪"},{value:"洗涤和整理",label:"洗涤和整理"},{value:"包装检验",label:"包装检验"},{value:"测量",label:"测量"},{value:"其他",label:"其他"}],value:"",formLabelWidth:"120px",rules:{classification:[{required:!0,message:"请选择瑕疵分类",trigger:"change"}],defectCode:[{required:!0,message:"请输入瑕疵代号",trigger:"blur"}],defectType:[{required:!0,message:"请输入瑕疵名称",trigger:"blur"}]}}},methods:{clear:function(){this.resetDataForm()},validateForm:function(){var e=this;this.$refs["dataForm"].validate((function(t){if(!t)return e.$message.error("网络出错，请稍后再试"),!1;Object(o["a"])({url:"/defect/add",method:"post",data:{classification:e.defectForm.classification,defectCode:e.defectForm.defectCode,defectType:e.defectForm.defectType}}).then((function(t){t&&200===t.status&&(e.dialogFormVisible=!1,e.$emit("onSubmit"))}))}))},resetDataForm:function(){this.$refs["dataForm"].clearValidate(),this.$refs["dataForm"].resetFields()},onSubmit:function(){this.validateForm()},onCancel:function(){this.dialogFormVisible=!1,this.resetDataForm()}}},f=d,u=(a("fa21"),a("2877")),m=Object(u["a"])(f,s,l,!1,null,"7cf8c6a2",null),h=m.exports,p=a("07c3"),b={name:"defectAll",components:{defectForm:h,SearchBar:p["a"]},data:function(){return{defectForm:[],currentPage:1,pagesize:7}},mounted:function(){this.loadDefects()},methods:{loadDefects:function(){var e=this,t=this;Object(o["a"])({url:"/defect/all",method:"get"}).then((function(e){var a=e.data;t.defectForm=a,console.log(t.defectForm)})).catch((function(t){e.$message.error("网络出错，请稍后再试")}))},handleCurrentChange:function(e){this.currentPage=e,console.log(this.currentPage)},handleChange:function(e){console.log(e)},searchResult:function(){var e=this,t=this,a="/defect/search?keywords="+t.$refs.searchBar.keywords;Object(o["a"])({url:a,methods:"get"}).then((function(e){var a=e.data;t.defectForm=a})).catch((function(t){e.$message.error("网络出错，请稍后再试")}))},deleteDefect:function(e){var t=this;this.$confirm("此操作将永久删除该瑕疵, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(a){Object(o["a"])({url:"/defect/delete",method:"post",data:{defectCode:e}}).then((function(e){e&&200===e.status&&t.loadDefects()})).catch((function(e){t.$message.error("网络出错，请稍后再试")}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},editDefect:function(e){this.$refs.edit.dialogFormVisible=!0,this.$refs.edit.defectForm={classification:e.classification,defectCode:e.defectCode,defectType:e.defectType}}}},v=b,g=(a("4082"),Object(u["a"])(v,c,r,!1,null,"f749312c",null)),y=g.exports,F=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-menu",{staticClass:"categories",attrs:{"default-active":"0","active-text-color":"red"},on:{select:e.handleSelect}},[a("el-menu-item",{attrs:{index:"0"}},[a("span",{attrs:{slot:"title"},slot:"title"},[e._v("全部瑕疵")])]),a("el-menu-item",{attrs:{index:"1"}},[a("span",{attrs:{slot:"title"},slot:"title"},[e._v("安全与监管")])]),a("el-menu-item",{attrs:{index:"2"}},[a("span",{attrs:{slot:"title"},slot:"title"},[e._v("材料")])]),a("el-menu-item",{attrs:{index:"3"}},[a("span",{attrs:{slot:"title"},slot:"title"},[e._v("清洁度")])]),a("el-menu-item",{attrs:{index:"4"}},[a("span",{attrs:{slot:"title"},slot:"title"},[e._v("制作")])]),a("el-menu-item",{attrs:{index:"5"}},[a("span",{attrs:{slot:"title"},slot:"title"},[e._v("组件和修剪")])]),a("el-menu-item",{attrs:{index:"6"}},[a("span",{attrs:{slot:"title"},slot:"title"},[e._v("洗涤和整理")])]),a("el-menu-item",{attrs:{index:"7"}},[a("span",{attrs:{slot:"title"},slot:"title"},[e._v("包装检验")])]),a("el-menu-item",{attrs:{index:"8"}},[a("span",{attrs:{slot:"title"},slot:"title"},[e._v("测量")])]),a("el-menu-item",{attrs:{index:"9"}},[a("span",{attrs:{slot:"title"},slot:"title"},[e._v("其他")])])],1)},C=[],k={name:"defectSideMenu",data:function(){return{cid:""}},methods:{handleSelect:function(e,t){this.cid=e,this.$emit("indexSelect")}}},x=k,_=(a("29ac"),Object(u["a"])(x,F,C,!1,null,"08b59238",null)),w=_.exports,$={name:"defectManagementComponent",components:{defectAll:y,defectSideMenu:w},data:function(){return{}},methods:{listByCategory:function(){var e=this,t=this,a=t.$refs.sideMenu.cid,i="";switch(a){case"0":i="全部瑕疵";break;case"1":i="安全与监管";break;case"2":i="材料";break;case"3":i="清洁度";break;case"4":i="制作";break;case"5":i="组件和修剪";break;case"6":i="洗涤和整理";break;case"7":i="包装检验";break;case"8":i="测量";break;case"9":i="其他";break}var n="/defect/"+i+"/defects";Object(o["a"])({url:n,method:"get"}).then((function(e){var a=e.data;t.$refs.formArea.defectForm=a})).catch((function(t){e.$message.error("网络出错，请稍后再试")}))}}},S=$,T=Object(u["a"])(S,i,n,!1,null,"48a0f0f6",null);t["default"]=T.exports},"29ac":function(e,t,a){"use strict";var i=a("b7ed"),n=a.n(i);n.a},4082:function(e,t,a){"use strict";var i=a("e299"),n=a.n(i);n.a},b7ed:function(e,t,a){},e299:function(e,t,a){},ef3e:function(e,t,a){},fa21:function(e,t,a){"use strict";var i=a("ef3e"),n=a.n(i);n.a}}]);
//# sourceMappingURL=chunk-64148fae.68a1d3de.js.map