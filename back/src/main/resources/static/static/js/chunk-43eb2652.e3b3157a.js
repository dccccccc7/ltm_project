(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-43eb2652"],{"09c4":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{width:"80%",height:"80%",margin:"10px auto 0"}},[a("div",{staticStyle:{width:"100%",height:"40px",margin:"10px 0","margin-bottom":"20px",display:"flex","justify-content":"space-between"}},[a("div",{staticStyle:{width:"30%",height:"40px",display:"flex","justify-content":"flex-start"}},[a("div",{staticStyle:{width:"80%",height:"40px",display:"flex","justify-content":"space-between"}},[a("el-form",{ref:"input",staticClass:"demo-ruleForm",attrs:{model:t.input,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"物料id",prop:"input",rules:[]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.input.input,callback:function(e){t.$set(t.input,"input","string"===typeof e?e.trim():e)},expression:"input.input"}})],1)],1)],1),a("el-button",{on:{click:function(e){return t.submitForm("input")}}},[t._v("搜索")])],1),a("div",{staticStyle:{width:"30%",height:"40px"}}),a("div",{staticStyle:{width:"30%",height:"40px"}},[a("el-button",{on:{click:function(e){t.addMaterial=!0}}},[t._v("增加")])],1)]),[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.materials}},[a("el-table-column",{attrs:{prop:"material_id",label:"物料编号"}}),a("el-table-column",{attrs:{prop:"name",label:"名称"}}),a("el-table-column",{attrs:{prop:"color",label:"颜色"}}),a("el-table-column",{attrs:{prop:"size",label:"型号"}}),a("el-table-column",{attrs:{prop:"status",label:"状态"}}),a("el-table-column",{attrs:{prop:"comments",label:"描述"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleClick(e.row)}}},[t._v("查看")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.edit(e.row)}}},[t._v("编辑")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.deleteThis(e.row)}}},[t._v("删除")])]}}])})],1)],a("div",{staticClass:"block",staticStyle:{padding:"10px","margin-top":"10px"}},[a("el-pagination",{attrs:{"hide-on-single-page":!0,total:t.total,background:"",layout:"total,prev, pager, next, jumper","page-size":t.page.pages},on:{"prev-click":t.preclick,"next-click":t.nextclick,"current-change":t.curChange}})],1),a("el-dialog",{attrs:{title:"提示",visible:t.addMaterial,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.addMaterial=e}}},[a("el-form",{ref:"incrementM",staticClass:"demo-ruleForm",attrs:{model:t.incrementM,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"物料名称",prop:"name",rules:[{required:!0,message:"物料名称不能为空"}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.incrementM.name,callback:function(e){t.$set(t.incrementM,"name","string"===typeof e?e.trim():e)},expression:"incrementM.name"}})],1),a("el-form-item",{attrs:{label:"物料型号",prop:"size",rules:[{required:!0,message:"物料型号不能为空"}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.incrementM.size,callback:function(e){t.$set(t.incrementM,"size","string"===typeof e?e.trim():e)},expression:"incrementM.size"}})],1),a("el-form-item",{attrs:{label:"物料颜色",prop:"color",rules:[{required:!0,message:"物料颜色不能为空"}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.incrementM.color,callback:function(e){t.$set(t.incrementM,"color","string"===typeof e?e.trim():e)},expression:"incrementM.color"}})],1),a("el-form-item",{attrs:{label:"物料描述",prop:"comments",rules:[{required:!0,message:"物料描述不能为空"}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.incrementM.comments,callback:function(e){t.$set(t.incrementM,"comments","string"===typeof e?e.trim():e)},expression:"incrementM.comments"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.incrementThis("incrementM")}}},[t._v("提交")]),a("el-button",{on:{click:function(e){return t.resetForm("incrementM")}}},[t._v("重置")])],1)],1)],1),a("el-dialog",{attrs:{title:"提示",visible:t.updateM,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.updateM=e}}},[a("el-form",{ref:"updateInfo",staticClass:"demo-ruleForm",attrs:{model:t.updateInfo,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"状态",prop:"status",rules:[{required:!0,message:"物料状态不能为空"}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.updateInfo.status,callback:function(e){t.$set(t.updateInfo,"status","string"===typeof e?e.trim():e)},expression:"updateInfo.status"}})],1),a("el-form-item",{attrs:{label:"描述",prop:"comments",rules:[{required:!0,message:"物料状态不能为空"}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.updateInfo.comments,callback:function(e){t.$set(t.updateInfo,"comments","string"===typeof e?e.trim():e)},expression:"updateInfo.comments"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.updateThis("updateInfo")}}},[t._v("提交")]),a("el-button",{on:{click:function(e){return t.resetForm("updateInfo")}}},[t._v("重置")])],1)],1)],1)],2)},i=[],o=(a("b0c0"),a("4791")),l={name:"materialInfo",data:function(){return{loading:!1,updateM:!1,addMaterial:!1,incrementM:{name:"",size:"",color:"",comments:"",operator_id:""},input:{input:""},updateInfo:{material_id:"",operator_id:"",status:"",comments:""},materials:[{material_id:"2",name:"1",color:"红色",size:"daha",status:"iasd",comments:"s"}],total:1,page:{pages:13,current:1}}},created:function(){this.getData()},methods:{preclick:function(t){var e=this;this.page.current=t,this.loading=!0,setTimeout((function(){e.getData(),e.loading=!1}),1e3)},nextclick:function(t){var e=this;this.page.current=t,this.loading=!0,setTimeout((function(){e.getData(),e.loading=!1}),1e3)},curChange:function(t){var e=this;this.page.current=t,this.loading=!0,setTimeout((function(){e.getData(),e.loading=!1}),1e3)},getData:function(){var t=this;this.loading=!0;var e={pageOffset:this.page.current,pageSize:this.page.pages};Object(o["a"])({url:"process/getMaterials",method:"get",params:e}).then((function(e){console.log("返回的：",e),t.materials=e.data.materials,t.total=e.data.count})).catch((function(t){console.log("ssss")})),this.loading=!1,console.log(e)},handleClose:function(t){this.$confirm("确认关闭？").then((function(e){t()})).catch((function(t){}))},incrementThis:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return console.log("error submit!!"),!1;e.loading=!0;var a={name:e.incrementM.name,size:e.incrementM.size,color:e.incrementM.color,comments:e.incrementM.comments,operator_id:1};console.log("增加信息参数：",a),Object(o["a"])({url:"process/addMaterial",method:"post",data:a}).then((function(t){"添加成功"===t.data?(e.addMaterial=!1,e.getData(),e.$message({type:"success",message:"添加成功"})):e.$message.error("添加失败"),e.loading=!1,console.log("增加信结果：",t)})).catch((function(t){}))}))},submitForm:function(t){var e=this;this.$refs[t].validate((function(t){if(t)if(""===e.input.input)e.getData();else{e.loading=!0;var a={material_id:e.input.input};console.log("查询参数：",a),Object(o["a"])({url:"process/getMaterialByID",params:a,method:"get"}).then((function(t){console.log("查询的结果：",t),console.log("---",t.data);var a=[];a.push(t.data),null!==t.data?(e.materials=a,e.total=1):e.$message.error("未查询到该物品"),e.loading=!1})).catch((function(t){console.log("?")}))}else console.log("!")}))},resetForm:function(t){this.$refs[t].resetFields()},handleClick:function(t){this.$router.push({path:"/storehouse/equAndMatMain/materialInfoDetail",query:{info:t}})},deleteThis:function(t){var e=this;this.loading=!0;var a={material_id:t.material_id,operator_id:1};Object(o["a"])({url:"process/deleteMaterialByID",method:"post",data:a}).then((function(t){"删除成功"===t.data?e.$message({type:"success",message:"删除成功"}):e.$message.error("删除失败"),e.getData()})).catch((function(t){}))},edit:function(t){this.updateM=!0,this.updateInfo.material_id=t.material_id,this.operator_id=1},updateThis:function(t){var e=this;this.$refs[t].validate((function(t){if(t){var a=e.updateInfo;e.loading=!0,Object(o["a"])({url:"process/updateMaterialByID",data:a,method:"post"}).then((function(t){console.log("修改--",t),e.updateM=!1,e.getData()})).catch((function(t){}))}else console.log("!")}))}}},r=l,s=(a("ee0d"),a("2877")),c=Object(s["a"])(r,n,i,!1,null,"5d067fe8",null);e["default"]=c.exports},4791:function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));a("d3b7"),a("4f6c");var n=a("bc3a"),i=a.n(n);function o(t){return new Promise((function(e,a){var n=i.a.create({timeout:45e3});n(t).then((function(t){console.log("成功"),e(t)})).catch((function(t){console.log("失败"),a(t)}))}))}},"4f6c":function(t,e,a){"use strict"},"51ba":function(t,e,a){},ee0d:function(t,e,a){"use strict";var n=a("51ba"),i=a.n(n);i.a}}]);
//# sourceMappingURL=chunk-43eb2652.e3b3157a.js.map