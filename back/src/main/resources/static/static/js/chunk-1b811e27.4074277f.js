(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1b811e27"],{"1bab":function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));a("d3b7");var i=a("bc3a"),n=a.n(i);function r(t){return new Promise((function(e,a){var i=n.a.create({timeout:3e3});i(t).then((function(t){e(t)})).catch((function(t){a(t)}))}))}},"3b7f":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"MaterialStock"}},[a("el-form",{attrs:{"label-position":"right"}},[a("div",{staticStyle:{display:"flex","flex-direction":"row","margin-left":"5px"}},[a("el-form-item",{attrs:{label:"请选择筛选条件",rules:{required:!1,message:"请选择物料",trigger:"change"},"label-width":"150px"}},[a("el-cascader",{attrs:{placeholder:"请选择物料",options:t.options,clearable:""},on:{change:function(e){return t.getMaterialStockByInfo(e)}}})],1)],1)]),a("div",{staticStyle:{float:"left","margin-top":"20px"},attrs:{id:"list-main"}},[a("el-table",{staticStyle:{"margin-left":"20px",width:"581px"},attrs:{data:t.materials,border:""}},[a("el-table-column",{attrs:{prop:"material_id",label:"编号",width:"100",align:"center","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"name",label:"名称",width:"100",align:"center"}}),a("el-table-column",{attrs:{prop:"size",label:"规格",width:"100",align:"center"}}),a("el-table-column",{attrs:{prop:"color",label:"颜色",width:"100",align:"center"}}),a("el-table-column",{attrs:{prop:"count",label:"库存",width:"100",align:"center"}}),a("el-table-column",{attrs:{label:"查看",id:"tool",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",circle:"",size:"mini",icon:"el-icon-more"},on:{click:function(a){return t.showChanges(e.row)}}})]}}])})],1),a("div",{staticStyle:{float:"left","margin-left":"20px","margin-top":"50px"},attrs:{id:"list-page"}},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[5,10,15],"page-size":t.size,"pager-count":5,layout:"total, sizes, prev, pager, next, jumper",total:t.count},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1),a("div",{staticStyle:{width:"600px",height:"450px",float:"left","margin-left":"30px"},attrs:{id:"canvas"}})],1)},n=[],r=a("1bab"),o={name:"MaterialStock",data:function(){return{currentPage:1,size:5,count:0,material:{name:"",size:"",color:""},options:[],materials:[],dates:["开始","结束"],stocks:[0,100],material_id:""}},methods:{handleSizeChange:function(t){this.size=t,this.getMaterialStock(this.currentPage,t)},handleCurrentChange:function(t){this.currentPage=t,this.getMaterialStock(t,this.size)},getMaterialStock:function(t,e){var a=this;Object(r["a"])({url:"/dataAnalysis/getMaterialStock",method:"get",params:{pageOffset:t,pageSize:e}}).then((function(t){a.count=t.data.count,a.materials=t.data.materials})).catch((function(t){console.log(t)}))},getMaterialStockByInfo:function(t){var e=this;t[0]?Object(r["a"])({url:"/dataAnalysis/getMaterialStockByInfo",method:"get",params:{name:t[0],size:t[1],color:t[2]}}).then((function(t){e.count=t.data.count,e.materials=t.data.materials})).catch((function(t){console.log(t)})):this.getMaterialStock(this.currentPage,this.size)},getMaterial:function(){var t=this;Object(r["a"])({url:"/getOptionMaterial",method:"get"}).then((function(e){t.options=e.data})).catch((function(t){console.log(t)}))},showChanges:function(t){var e=this;this.material_id=t.material_id,Object(r["a"])({url:"/dataAnalysis/getMaterialStockChanges",method:"get",params:{material_id:this.material_id}}).then((function(t){e.dates=t.data.dates,e.stocks=t.data.stocks,e.drawChart()})).catch((function(t){console.log(t)}))},drawChart:function(){var t=this.$echarts.getInstanceByDom(document.getElementById("canvas"));null==t&&(t=this.$echarts.init(document.getElementById("canvas")));var e={title:{text:"过去七天物料库存变化",subtext:"物料编号： "+this.material_id},tooltip:{trigger:"axis"},toolbox:{show:!0,feature:{dataView:{readOnly:!1},saveAsImage:{}}},xAxis:{type:"category",data:this.dates},yAxis:{type:"value"},series:[{name:"物料库存",data:this.stocks,type:"line"}]};t.setOption(e)}},created:function(){this.getMaterialStock(this.currentPage,this.size),this.getMaterial(),this.drawChart()},activated:function(){this.getMaterialStock(this.currentPage,this.size),this.drawChart()}},l=o,s=(a("afa4"),a("2877")),c=Object(s["a"])(l,i,n,!1,null,"c554f280",null);e["default"]=c.exports},afa4:function(t,e,a){"use strict";var i=a("fc11"),n=a.n(i);n.a},fc11:function(t,e,a){}}]);
//# sourceMappingURL=chunk-1b811e27.4074277f.js.map