{"version":3,"sources":["webpack:///./src/components/storehouse/tableShelf.vue?ec1f","webpack:///./src/network/request.js","webpack:///./src/network/requests/workshop_request.js","webpack:///./src/components/storehouse/tableShelf.vue?ef14","webpack:///src/components/storehouse/tableShelf.vue","webpack:///./src/components/storehouse/tableShelf.vue?ed60","webpack:///./src/components/storehouse/tableShelf.vue"],"names":["request","config","Promise","resolve","reject","instance","axios","create","timeout","then","res","catch","err","my_request","console","log","render","_vm","this","_h","$createElement","_c","_self","staticStyle","_v","_s","$route","query","storage_id","ref","staticClass","attrs","input","model","value","callback","$$v","$set","trim","expression","on","$event","submitForm1","deleteStorage","incrementShelfFlag","handleClose","shelf","required","message","addShelf","tableData","scopedSlots","_u","key","fn","scope","see","$index","row","deleteShelf","dialogVisible","info","submitForm","resetForm","total","page","pages","preclick","nextclick","curChange","staticRenderFns","name","data","current","addShelfInfo","shelfId","item","sectorId","location","created","getData","methods","user","url","params","req","method","loading","setTimeout","$confirm","editShelf","index","type","$refs","formName","validate","valid","itemId","newSectorId","newShelfId","newLocation","resetFields","id","success","$router","push","path","component"],"mappings":"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","file":"static/js/chunk-574232e6.e87ad2fc.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tableShelf.vue?vue&type=style&index=0&id=283c39f2&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tableShelf.vue?vue&type=style&index=0&id=283c39f2&scoped=true&lang=css&\"","import axios from 'axios'\n\n// axios.interceptors.request.use(config => {\n//   console.log(config)\n//   // 必须返回请求，否则后端无法获得\n//   return config\n// }, err => {\n//   console.log(err)\n// })\n\nexport function request(config) {\n    return new Promise(((resolve, reject) => {\n\n        const instance = axios.create({\n            timeout: 3000,\n        });\n\n        instance(config).then(res => {\n            resolve(res);\n        }).catch(err => {\n            reject(err);\n        })\n    }))\n}\n","import ca from \"element-ui/src/locale/lang/ca\";\nimport axios from \"axios\";\n\nexport function my_request(config) {\n\n  return new Promise(((resolve, reject) => {\n\n    const instance = axios.create({\n      timeout: 45000,\n      // headers: {'X-Custom-Header': 'foobar'}\n    });\n\n    instance(config).then(res => {\n      console.log('成功')\n      resolve(res);\n    }).catch(err => {\n      console.log('失败')\n      reject(err);\n    })\n  }))\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"width\":\"80%\",\"height\":\"80%\",\"margin\":\"40px auto 0\"}},[_c('div',{staticStyle:{\"width\":\"100%\",\"height\":\"40px\",\"display\":\"flex\",\"flex-direction\":\"row\"}},[_c('span',{staticStyle:{\"font-family\":\"宋体\",\"width\":\"20%\",\"font-size\":\"larger\",\"color\":\"#2c3e50\",\"line-height\":\"40px\"}},[_vm._v(\"库区编号: \"+_vm._s(this.$route.query.storage_id))]),_c('div',{staticStyle:{\"width\":\"70%\",\"height\":\"40px\",\"margin-bottom\":\"10px\",\"display\":\"flex\",\"justify-content\":\"flex-start\"}},[_c('div',{staticStyle:{\"width\":\"100%\",\"height\":\"auto\",\"display\":\"flex\",\"justify-content\":\"start\"}},[_c('el-form',{ref:\"input\",staticClass:\"demo-dynamic\",attrs:{\"model\":_vm.input,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"prop\":\"input\",\"label\":\"货架编号\",\"rules\":[\n                      // { required: true, message: '请输入库区编号', trigger: 'blur' },\n                    ]}},[_c('el-input',{model:{value:(_vm.input.input),callback:function ($$v) {_vm.$set(_vm.input, \"input\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"input.input\"}})],1)],1),_c('el-button',{on:{\"click\":function($event){return _vm.submitForm1('input')}}},[_vm._v(\"搜索\")])],1)]),_c('div',{staticStyle:{\"width\":\"40%\",\"height\":\"40px\",\"display\":\"flex\",\"justify-content\":\"flex-end\"}},[_c('el-button',{on:{\"click\":_vm.deleteStorage}},[_vm._v(\"删除库区\")]),_c('el-button',{on:{\"click\":function($event){_vm.incrementShelfFlag = true}}},[_vm._v(\"增加货架\")]),_c('el-dialog',{attrs:{\"title\":\"提示\",\"visible\":_vm.incrementShelfFlag,\"width\":\"25%\",\"before-close\":_vm.handleClose},on:{\"update:visible\":function($event){_vm.incrementShelfFlag=$event}}},[_c('el-form',{ref:\"shelf\",staticClass:\"demo-ruleForm\",attrs:{\"model\":_vm.shelf,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"货架编号\",\"prop\":\"id\",\"rules\":[\n                      { required: true, message: '货架编号不能为空'} ]}},[_c('el-input',{attrs:{\"autocomplete\":\"off\"},model:{value:(_vm.shelf.id),callback:function ($$v) {_vm.$set(_vm.shelf, \"id\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"shelf.id\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.addShelf('shelf')}}},[_vm._v(\"提交\")])],1)],1)],1)],1)]),_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData}},[_c('el-table-column',{attrs:{\"label\":\"货架编号\",\"prop\":\"id\"}}),_c('el-table-column',{attrs:{\"label\":\"存放物品类别\",\"prop\":\"types\"}}),_c('el-table-column',{attrs:{\"label\":\"创建时间\",\"prop\":\"created_time\"}}),_c('el-table-column',{attrs:{\"label\":\"创建人\",\"prop\":\"created_by\"}}),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"success\"},on:{\"click\":function($event){return _vm.see(scope.$index, scope.row)}}},[_vm._v(\"查看 \")]),_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"danger\"},on:{\"click\":function($event){return _vm.deleteShelf(scope.$index, scope.row)}}},[_vm._v(\"删除 \")])]}}])})],1),_c('el-dialog',{attrs:{\"title\":\"转移后位置信息\",\"visible\":_vm.dialogVisible,\"width\":\"30%\",\"before-close\":_vm.handleClose},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('el-form',{ref:\"info\",staticClass:\"demo-ruleForm\",attrs:{\"model\":_vm.info,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"库区编号\",\"prop\":\"sectorId\",\"rules\":[\n                            { required: true, message: '库区编号不能为空'} ]}},[_c('el-input',{attrs:{\"autocomplete\":\"off\"},model:{value:(_vm.info.sectorId),callback:function ($$v) {_vm.$set(_vm.info, \"sectorId\", $$v)},expression:\"info.sectorId\"}})],1),_c('el-form-item',{attrs:{\"label\":\"货架编号\",\"prop\":\"shelfId\",\"rules\":[\n                            { required: true, message: '货架编号不能为空'} ]}},[_c('el-input',{attrs:{\"autocomplete\":\"off\"},model:{value:(_vm.info.shelfId),callback:function ($$v) {_vm.$set(_vm.info, \"shelfId\", $$v)},expression:\"info.shelfId\"}})],1),_c('el-form-item',{attrs:{\"label\":\"库位信息\",\"prop\":\"location\",\"rules\":[\n                            { required: true, message: '库位信息不能为空'} ]}},[_c('el-input',{attrs:{\"autocomplete\":\"off\"},model:{value:(_vm.info.location),callback:function ($$v) {_vm.$set(_vm.info, \"location\", $$v)},expression:\"info.location\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submitForm('info')}}},[_vm._v(\"提交\")]),_c('el-button',{on:{\"click\":function($event){return _vm.resetForm('info')}}},[_vm._v(\"重置\")])],1)],1)],1),_c('div',{staticClass:\"block\",staticStyle:{\"padding\":\"10px\"}},[_c('el-pagination',{attrs:{\"hide-on-single-page\":true,\"total\":_vm.total,\"background\":\"\",\"layout\":\"total,prev, pager, next, jumper\",\"page-size\":_vm.page.pages},on:{\"prev-click\":_vm.preclick,\"next-click\":_vm.nextclick,\"current-change\":_vm.curChange}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div style=\"width: 80%;height:80%;margin: 40px auto 0;\">\n\n    <div style=\"width: 100%;height: 40px;display: flex;flex-direction:row;\">\n      <span style=\"font-family: 宋体 ;width: 20%;font-size: larger;color: #2c3e50;line-height: 40px\">库区编号: {{this.$route.query.storage_id}}</span>\n      <div style=\"width: 70%;height: 40px;margin-bottom: 10px;display: flex;justify-content: flex-start\">\n        <div style=\"width: 100%;height: auto;display: flex;justify-content: start\">\n          <!--        ------------------->\n          <el-form :model=\"input\" ref=\"input\" label-width=\"100px\" class=\"demo-dynamic\">\n            <el-form-item\n                prop=\"input\"\n                label=\"货架编号\"\n                :rules=\"[\n                        // { required: true, message: '请输入库区编号', trigger: 'blur' },\n                      ]\">\n              <el-input v-model.trim=\"input.input\"></el-input>\n            </el-form-item>\n\n          </el-form>\n          <el-button  @click=\"submitForm1('input')\">搜索</el-button>\n          <!--        ------------------->\n        </div>\n      </div>\n      <div style=\"width: 40%;height: 40px;display: flex;justify-content: flex-end;\">\n        <el-button @click=\"deleteStorage\">删除库区</el-button>\n        <el-button @click=\"incrementShelfFlag = true\">增加货架</el-button>\n        <el-dialog\n            title=\"提示\"\n            :visible.sync=\"incrementShelfFlag\"\n            width=\"25%\"\n            :before-close=\"handleClose\">\n\n          <el-form :model=\"shelf\" ref=\"shelf\" label-width=\"100px\" class=\"demo-ruleForm\">\n            <el-form-item\n                label=\"货架编号\"\n                prop=\"id\"\n                :rules=\"[\n                        { required: true, message: '货架编号不能为空'},\n\n                      ]\">\n              <el-input v-model.trim=\"shelf.id\" autocomplete=\"off\"></el-input>\n            </el-form-item>\n            <el-form-item>\n              <el-button type=\"primary\" @click=\"addShelf('shelf')\">提交</el-button>\n\n            </el-form-item>\n          </el-form>\n        </el-dialog>\n      </div>\n    </div>\n    <el-table\n        :data=\"tableData\"\n        style=\"width: 100%;\">\n\n      <el-table-column\n          label=\"货架编号\"\n          prop=\"id\">\n      </el-table-column>\n      <el-table-column\n          label=\"存放物品类别\"\n          prop=\"types\">\n      </el-table-column>\n      <el-table-column\n          label=\"创建时间\"\n          prop=\"created_time\">\n      </el-table-column>\n      <el-table-column\n          label=\"创建人\"\n          prop=\"created_by\">\n      </el-table-column>\n\n      <el-table-column label=\"操作\">\n        <template slot-scope=\"scope\">\n          <el-button\n              size=\"mini\"\n              type=\"success\"\n              @click=\"see(scope.$index, scope.row)\">查看\n          </el-button>\n          <el-button\n              size=\"mini\"\n              type=\"danger\"\n              @click=\"deleteShelf(scope.$index, scope.row)\">删除\n          </el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n    <el-dialog\n        title=\"转移后位置信息\"\n        :visible.sync=\"dialogVisible\"\n        width=\"30%\"\n        :before-close=\"handleClose\">\n\n              <el-form :model=\"info\" ref=\"info\" label-width=\"100px\" class=\"demo-ruleForm\">\n                <el-form-item\n                    label=\"库区编号\"\n                    prop=\"sectorId\"\n                    :rules=\"[\n                              { required: true, message: '库区编号不能为空'},\n                            ]\">\n                  <el-input v-model=\"info.sectorId\" autocomplete=\"off\"></el-input>\n                </el-form-item>\n                <el-form-item\n                    label=\"货架编号\"\n                    prop=\"shelfId\"\n                    :rules=\"[\n                              { required: true, message: '货架编号不能为空'},\n                            ]\">\n                  <el-input v-model=\"info.shelfId\" autocomplete=\"off\"></el-input>\n                </el-form-item>\n                <el-form-item\n                    label=\"库位信息\"\n                    prop=\"location\"\n                    :rules=\"[\n                              { required: true, message: '库位信息不能为空'},\n                            ]\">\n                  <el-input v-model=\"info.location\" autocomplete=\"off\"></el-input>\n                </el-form-item>\n                <el-form-item>\n                  <el-button type=\"primary\" @click=\"submitForm('info')\">提交</el-button>\n                  <el-button @click=\"resetForm('info')\">重置</el-button>\n                </el-form-item>\n              </el-form>\n\n    </el-dialog>\n    <div class=\"block\" style=\"padding: 10px\">\n      <el-pagination\n          @prev-click=\"preclick\"\n          @next-click=\"nextclick\"\n          @current-change=\"curChange\"\n          :hide-on-single-page=true\n          :total=\"total\"\n          background\n          layout=\"total,prev, pager, next, jumper\"\n          :page-size=\"page.pages\">\n      </el-pagination>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {my_request} from \"@/network/requests/workshop_request\";\nimport {request} from \"@/network/request\";\nexport default {\n  name: \"tableShelf\",\n\n  data(){\n    return {\n\n      page:{\n        pages: 10,\n        current: 1,\n      },\n      total:1,\n\n      dialogVisible:false,\n      shelf:{id:''},\n      //  增加货架\n      incrementShelfFlag: false,\n      addShelfInfo:{\n        shelfId:''\n      },\n      input:{input:''},\n      tableData: [\n      ],\n    //  物品转移信息\n      item: '',\n      info:{\n        sectorId: '',\n        shelfId:'',\n        location:'',\n      }\n    }\n  },\n  created() {\n    console.log(this.$route.query,'shelf')\n    this.getData()\n  },\n  methods:{\n    getData(){\n      let req = {\n        storage_id:this.$route.query.storage_id,\n        current: this.page.current,  //页数 从1开始\n        pages: this.page.pages, // 每页多少数据\n        user:this.$store.getters.userinfo.id\n        // user:1\n      };\n      console.log('getData的req，',req)\n\n      request({\n        url:'shelf/shelfItemById',\n        params: req,\n        method:'get'\n      }).then(res=>{\n        console.log('getData的res，',res)\n        this.tableData = res.data.result.records\n        this.total = res.data.result.total\n        if(res.data.success===true){\n          for(let i = 0;i< this.tableData.length;i++){\n            if(this.tableData[i].types===null){\n              this.tableData[i].types = '无'\n            }\n          }\n          console.log('看看这个',this.tableData)\n\n        }else {\n          this.$message.error('查询失败')\n        }\n      }).catch(err=>{\n        console.log('getData的err，',err)\n        this.$message.error('服务器异常')\n      })\n    },\n    preclick(current){\n      this.page.current=current\n      this.loading = true\n      setTimeout(()=>{\n        this.getData()\n        this.loading=false\n      },1000)\n    },\n    nextclick(current){\n      this.page.current=current\n      this.loading = true\n      setTimeout(()=>{\n        this.getData()\n        this.loading=false\n      },1000)\n\n    },\n    curChange(current){\n      this.page.current=current\n      this.loading = true\n      setTimeout(()=>{\n        this.getData()\n        this.loading=false\n      },1000)\n    },\n\n    handleClose(done) {\n      this.$confirm('确认关闭？')\n          .then(_ => {\n            done();\n          })\n          .catch(_ => {});\n    },\n  //\n    editShelf(index,row){\n      this.item = {\n        index:index,\n        row:row\n      }\n      this.dialogVisible = true;\n\n    },\n    deleteShelf(index,row){\n        let req = {\n          storage_id : this.$route.query.storage_id,\n          id: row.id,\n          user:this.$store.getters.userinfo.id\n          // user:1\n        }\n      console.log('删除或加的req',req)\n\n      my_request({\n        url:'shelf/delete',\n        params:req,\n        method:'get'\n      }).then(res=>{\n        console.log('删除或加的res',res)\n        if(res.data.success===true){\n          this.$message({\n            type:'success',\n            message:'删除成功'\n          })\n          this.getData()\n        }else {\n          this.$message.error('删除失败')\n        }\n      //  返回 failed 删除失败（物料山仍有货架未清理） 、success  删除成功\n      }).catch(err=>{\n        console.log('删除或加的err',err)\n        this.$message.error('服务器异常')\n\n      })\n    },\n    submitForm(formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n\n          let  req = {\n            sectorId:this.$route.query.sectorId,\n            shelfId:this.$route.query.shelfId,\n            itemId:this.item.row.id,// 物品id\n            newSectorId: this.info.sectorId,\n            newShelfId: this.info.shelfId,\n            newLocation: this.info.location\n          }\n          console.log('req---------------------',req)\n          console.log(this.item)\n          request({\n            url: 'storehouse/moveItem',\n            methods:'get',\n            params:'get'\n          }).then(res=>{\n\n\n            this.dialogVisible = false\n            this.getData()\n            this.$message({\n              type:'success',\n              message:'转移成功'\n            })\n          }).catch(err=>{\n            this.$message.error('转移失败')\n          })\n        } else {\n          console.log('error submit!!');\n          return false;\n        }\n      });\n    },\n    resetForm(formName) {\n      this.$refs[formName].resetFields();\n    },\n\n    submitForm1(formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          if (this.input.input==='')\n          {\n            this.getData()\n          }else {\n            let req = {\n              storage_id:this.$route.query.storage_id,\n              id: this.input.input\n            }\n            console.log('查询某个货架的req',req)\n            my_request({\n              url: 'shelf/search',\n              method: 'get',\n              params: req\n\n            }).then(res => {\n\n              console.log('查询某个货架的res',res)\n              this.tableData = res.data.result\n              if(res.data.success===true){\n                this.$message({\n                  type:'success',\n                  message:'查询成功'\n                })\n              }else {\n                this.$message.error('查询失败')\n              }\n              // this.tableData = req.\n              //如果搜索成功\n              this.show = true\n            }).catch(err => {\n              console.log('查询某个货架的err',err)\n              this.$message.error('服务器异常')\n            })\n            //如果搜索成功\n            this.show = true\n            this.tableData = [\n              {\n                id: '1',\n                         category: 'asd',\n                         created_time:'2017-23-19',\n                         created_by:'asdw',\n                          quantity: '1000'\n                // 加一个 货架数量？\n                //shelf_Num:''221\n                // 后面三个有的话就写 没有就控制\n              }\n            ]\n          }\n        } else {\n          console.log('error submit!!');\n          return false;\n        }\n\n      });\n    },\n  //  删除库区\n    deleteStorage(){\n\n      let req = {\n        storage_id: this.$route.query.storage_id,\n        user:this.$store.getters.userinfo.id\n        // user:1\n      }\n      console.log(req,'reerer')\n      //如果shelf内的物料军为空，则可以删除\n      my_request({\n        url: 'storage/delete',\n        methods: 'get',\n        params: req\n      }).then(res=>{\n        if (res.data.success===true){\n\n          this.$message({\n            type:'success',\n            message:\"删除成功\"\n          })\n          this.$router.go(-1)\n        }else {\n          this.$message.error('删除失败')\n        }\n        //删除所有库区内所有货架，删除库区\n        //删除成功？ 权限不足？ 库区内仍有物料\n        this.getData()\n      }).catch(err=>{\n        this.$message.error('服务器异常')\n      })\n    },\n\n  //  增加货架\n    addShelf(formName ){\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          let req  = {\n            storage_id:this.$route.query.storage_id,\n            id: this.shelf.id,\n            user:this.$store.getters.userinfo.id\n            // user:1\n          }\n          my_request({\n            url:'shelf/insert',\n            params: req,\n            method:'get'\n          }).then(res=>{\n            console.log('增加货架的res：',res)\n            if(res.data.success===true){\n              this.$message({\n                type:\"success\",\n                message:'增加成功'\n              })\n              this.getData()\n            }else {\n              this.$message.error('增加失败')\n            }\n\n            this.$refs[formName].resetFields();\n          }).catch(err=>{\n            console.log('增加货架的err：',err)\n            this.$message.error('服务器异常')\n          })\n          this.incrementShelfFlag = false\n        } else {\n          console.log('error submit!!');\n          return false;\n        }\n      });\n\n\n\n    },\n\n  //  查看\n    see(index,row){\n      this.$router.push({\n        path: '/storehouse/storageMain/shelfInfoDetail',\n        query:{\n          storage_id: this.$route.query.storage_id,\n          id:row.id\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style scoped>\n/deep/  td {\n  padding: 6px 20px !important;\n  /*border: 1px solid blue;*/\n\n}\n\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tableShelf.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tableShelf.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./tableShelf.vue?vue&type=template&id=283c39f2&scoped=true&\"\nimport script from \"./tableShelf.vue?vue&type=script&lang=js&\"\nexport * from \"./tableShelf.vue?vue&type=script&lang=js&\"\nimport style0 from \"./tableShelf.vue?vue&type=style&index=0&id=283c39f2&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"283c39f2\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}