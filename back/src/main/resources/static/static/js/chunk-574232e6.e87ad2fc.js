(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-574232e6"],{"000c":function(e,t,o){"use strict";var s=o("a613"),i=o.n(s);i.a},"1bab":function(e,t,o){"use strict";o.d(t,"a",(function(){return a}));o("d3b7");var s=o("bc3a"),i=o.n(s);function a(e){return new Promise((function(t,o){var s=i.a.create({timeout:3e3});s(e).then((function(e){t(e)})).catch((function(e){o(e)}))}))}},4791:function(e,t,o){"use strict";o.d(t,"a",(function(){return a}));o("d3b7"),o("4f6c");var s=o("bc3a"),i=o.n(s);function a(e){return new Promise((function(t,o){var s=i.a.create({timeout:45e3});s(e).then((function(e){console.log("成功"),t(e)})).catch((function(e){console.log("失败"),o(e)}))}))}},"4da3":function(e,t,o){"use strict";o.r(t);var s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticStyle:{width:"80%",height:"80%",margin:"40px auto 0"}},[o("div",{staticStyle:{width:"100%",height:"40px",display:"flex","flex-direction":"row"}},[o("span",{staticStyle:{"font-family":"宋体",width:"20%","font-size":"larger",color:"#2c3e50","line-height":"40px"}},[e._v("库区编号: "+e._s(this.$route.query.storage_id))]),o("div",{staticStyle:{width:"70%",height:"40px","margin-bottom":"10px",display:"flex","justify-content":"flex-start"}},[o("div",{staticStyle:{width:"100%",height:"auto",display:"flex","justify-content":"start"}},[o("el-form",{ref:"input",staticClass:"demo-dynamic",attrs:{model:e.input,"label-width":"100px"}},[o("el-form-item",{attrs:{prop:"input",label:"货架编号",rules:[]}},[o("el-input",{model:{value:e.input.input,callback:function(t){e.$set(e.input,"input","string"===typeof t?t.trim():t)},expression:"input.input"}})],1)],1),o("el-button",{on:{click:function(t){return e.submitForm1("input")}}},[e._v("搜索")])],1)]),o("div",{staticStyle:{width:"40%",height:"40px",display:"flex","justify-content":"flex-end"}},[o("el-button",{on:{click:e.deleteStorage}},[e._v("删除库区")]),o("el-button",{on:{click:function(t){e.incrementShelfFlag=!0}}},[e._v("增加货架")]),o("el-dialog",{attrs:{title:"提示",visible:e.incrementShelfFlag,width:"25%","before-close":e.handleClose},on:{"update:visible":function(t){e.incrementShelfFlag=t}}},[o("el-form",{ref:"shelf",staticClass:"demo-ruleForm",attrs:{model:e.shelf,"label-width":"100px"}},[o("el-form-item",{attrs:{label:"货架编号",prop:"id",rules:[{required:!0,message:"货架编号不能为空"}]}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:e.shelf.id,callback:function(t){e.$set(e.shelf,"id","string"===typeof t?t.trim():t)},expression:"shelf.id"}})],1),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addShelf("shelf")}}},[e._v("提交")])],1)],1)],1)],1)]),o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[o("el-table-column",{attrs:{label:"货架编号",prop:"id"}}),o("el-table-column",{attrs:{label:"存放物品类别",prop:"types"}}),o("el-table-column",{attrs:{label:"创建时间",prop:"created_time"}}),o("el-table-column",{attrs:{label:"创建人",prop:"created_by"}}),o("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(o){return e.see(t.$index,t.row)}}},[e._v("查看 ")]),o("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(o){return e.deleteShelf(t.$index,t.row)}}},[e._v("删除 ")])]}}])})],1),o("el-dialog",{attrs:{title:"转移后位置信息",visible:e.dialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[o("el-form",{ref:"info",staticClass:"demo-ruleForm",attrs:{model:e.info,"label-width":"100px"}},[o("el-form-item",{attrs:{label:"库区编号",prop:"sectorId",rules:[{required:!0,message:"库区编号不能为空"}]}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:e.info.sectorId,callback:function(t){e.$set(e.info,"sectorId",t)},expression:"info.sectorId"}})],1),o("el-form-item",{attrs:{label:"货架编号",prop:"shelfId",rules:[{required:!0,message:"货架编号不能为空"}]}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:e.info.shelfId,callback:function(t){e.$set(e.info,"shelfId",t)},expression:"info.shelfId"}})],1),o("el-form-item",{attrs:{label:"库位信息",prop:"location",rules:[{required:!0,message:"库位信息不能为空"}]}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:e.info.location,callback:function(t){e.$set(e.info,"location",t)},expression:"info.location"}})],1),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("info")}}},[e._v("提交")]),o("el-button",{on:{click:function(t){return e.resetForm("info")}}},[e._v("重置")])],1)],1)],1),o("div",{staticClass:"block",staticStyle:{padding:"10px"}},[o("el-pagination",{attrs:{"hide-on-single-page":!0,total:e.total,background:"",layout:"total,prev, pager, next, jumper","page-size":e.page.pages},on:{"prev-click":e.preclick,"next-click":e.nextclick,"current-change":e.curChange}})],1)],1)},i=[],a=o("4791"),r=o("1bab"),n={name:"tableShelf",data:function(){return{page:{pages:10,current:1},total:1,dialogVisible:!1,shelf:{id:""},incrementShelfFlag:!1,addShelfInfo:{shelfId:""},input:{input:""},tableData:[],item:"",info:{sectorId:"",shelfId:"",location:""}}},created:function(){console.log(this.$route.query,"shelf"),this.getData()},methods:{getData:function(){var e=this,t={storage_id:this.$route.query.storage_id,current:this.page.current,pages:this.page.pages,user:this.$store.getters.userinfo.id};console.log("getData的req，",t),Object(r["a"])({url:"shelf/shelfItemById",params:t,method:"get"}).then((function(t){if(console.log("getData的res，",t),e.tableData=t.data.result.records,e.total=t.data.result.total,!0===t.data.success){for(var o=0;o<e.tableData.length;o++)null===e.tableData[o].types&&(e.tableData[o].types="无");console.log("看看这个",e.tableData)}else e.$message.error("查询失败")})).catch((function(t){console.log("getData的err，",t),e.$message.error("服务器异常")}))},preclick:function(e){var t=this;this.page.current=e,this.loading=!0,setTimeout((function(){t.getData(),t.loading=!1}),1e3)},nextclick:function(e){var t=this;this.page.current=e,this.loading=!0,setTimeout((function(){t.getData(),t.loading=!1}),1e3)},curChange:function(e){var t=this;this.page.current=e,this.loading=!0,setTimeout((function(){t.getData(),t.loading=!1}),1e3)},handleClose:function(e){this.$confirm("确认关闭？").then((function(t){e()})).catch((function(e){}))},editShelf:function(e,t){this.item={index:e,row:t},this.dialogVisible=!0},deleteShelf:function(e,t){var o=this,s={storage_id:this.$route.query.storage_id,id:t.id,user:this.$store.getters.userinfo.id};console.log("删除或加的req",s),Object(a["a"])({url:"shelf/delete",params:s,method:"get"}).then((function(e){console.log("删除或加的res",e),!0===e.data.success?(o.$message({type:"success",message:"删除成功"}),o.getData()):o.$message.error("删除失败")})).catch((function(e){console.log("删除或加的err",e),o.$message.error("服务器异常")}))},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;var o={sectorId:t.$route.query.sectorId,shelfId:t.$route.query.shelfId,itemId:t.item.row.id,newSectorId:t.info.sectorId,newShelfId:t.info.shelfId,newLocation:t.info.location};console.log("req---------------------",o),console.log(t.item),Object(r["a"])({url:"storehouse/moveItem",methods:"get",params:"get"}).then((function(e){t.dialogVisible=!1,t.getData(),t.$message({type:"success",message:"转移成功"})})).catch((function(e){t.$message.error("转移失败")}))}))},resetForm:function(e){this.$refs[e].resetFields()},submitForm1:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;if(""===t.input.input)t.getData();else{var o={storage_id:t.$route.query.storage_id,id:t.input.input};console.log("查询某个货架的req",o),Object(a["a"])({url:"shelf/search",method:"get",params:o}).then((function(e){console.log("查询某个货架的res",e),t.tableData=e.data.result,!0===e.data.success?t.$message({type:"success",message:"查询成功"}):t.$message.error("查询失败"),t.show=!0})).catch((function(e){console.log("查询某个货架的err",e),t.$message.error("服务器异常")})),t.show=!0,t.tableData=[{id:"1",category:"asd",created_time:"2017-23-19",created_by:"asdw",quantity:"1000"}]}}))},deleteStorage:function(){var e=this,t={storage_id:this.$route.query.storage_id,user:this.$store.getters.userinfo.id};console.log(t,"reerer"),Object(a["a"])({url:"storage/delete",methods:"get",params:t}).then((function(t){!0===t.data.success?(e.$message({type:"success",message:"删除成功"}),e.$router.go(-1)):e.$message.error("删除失败"),e.getData()})).catch((function(t){e.$message.error("服务器异常")}))},addShelf:function(e){var t=this;this.$refs[e].validate((function(o){if(!o)return console.log("error submit!!"),!1;var s={storage_id:t.$route.query.storage_id,id:t.shelf.id,user:t.$store.getters.userinfo.id};Object(a["a"])({url:"shelf/insert",params:s,method:"get"}).then((function(o){console.log("增加货架的res：",o),!0===o.data.success?(t.$message({type:"success",message:"增加成功"}),t.getData()):t.$message.error("增加失败"),t.$refs[e].resetFields()})).catch((function(e){console.log("增加货架的err：",e),t.$message.error("服务器异常")})),t.incrementShelfFlag=!1}))},see:function(e,t){this.$router.push({path:"/storehouse/storageMain/shelfInfoDetail",query:{storage_id:this.$route.query.storage_id,id:t.id}})}}},l=n,c=(o("000c"),o("2877")),u=Object(c["a"])(l,s,i,!1,null,"283c39f2",null);t["default"]=u.exports},"4f6c":function(e,t,o){"use strict"},a613:function(e,t,o){}}]);
//# sourceMappingURL=chunk-574232e6.e87ad2fc.js.map