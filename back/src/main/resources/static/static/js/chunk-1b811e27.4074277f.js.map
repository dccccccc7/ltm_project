{"version":3,"sources":["webpack:///./src/network/request.js","webpack:///./src/views/dataAnalysis/MaterialStock.vue?28f2","webpack:///src/views/dataAnalysis/MaterialStock.vue","webpack:///./src/views/dataAnalysis/MaterialStock.vue?2a60","webpack:///./src/views/dataAnalysis/MaterialStock.vue","webpack:///./src/views/dataAnalysis/MaterialStock.vue?39d9"],"names":["request","config","Promise","resolve","reject","instance","axios","create","timeout","then","res","catch","err","render","_vm","this","_h","$createElement","_c","_self","attrs","staticStyle","required","message","trigger","options","on","$event","getMaterialStockByInfo","materials","scopedSlots","_u","key","fn","scope","showChanges","row","currentPage","size","count","handleSizeChange","handleCurrentChange","staticRenderFns","name","data","material","color","dates","stocks","material_id","methods","val","getMaterialStock","url","method","params","pageOffset","pageSize","console","log","event","getMaterial","drawChart","myChart","$echarts","init","document","getElementById","title","text","subtext","tooltip","toolbox","show","feature","dataView","saveAsImage","xAxis","type","yAxis","series","setOption","option","created","activated","component"],"mappings":"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","file":"static/js/chunk-1b811e27.4074277f.js","sourcesContent":["import axios from 'axios'\n\n// axios.interceptors.request.use(config => {\n//   console.log(config)\n//   // 必须返回请求，否则后端无法获得\n//   return config\n// }, err => {\n//   console.log(err)\n// })\n\nexport function request(config) {\n    return new Promise(((resolve, reject) => {\n\n        const instance = axios.create({\n            timeout: 3000,\n        });\n\n        instance(config).then(res => {\n            resolve(res);\n        }).catch(err => {\n            reject(err);\n        })\n    }))\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"MaterialStock\"}},[_c('el-form',{attrs:{\"label-position\":\"right\"}},[_c('div',{staticStyle:{\"display\":\"flex\",\"flex-direction\":\"row\",\"margin-left\":\"5px\"}},[_c('el-form-item',{attrs:{\"label\":'请选择筛选条件',\"rules\":{required: false, message: '请选择物料', trigger: 'change'},\"label-width\":\"150px\"}},[_c('el-cascader',{attrs:{\"placeholder\":\"请选择物料\",\"options\":_vm.options,\"clearable\":\"\"},on:{\"change\":function($event){return _vm.getMaterialStockByInfo($event)}}})],1)],1)]),_c('div',{staticStyle:{\"float\":\"left\",\"margin-top\":\"20px\"},attrs:{\"id\":\"list-main\"}},[_c('el-table',{staticStyle:{\"margin-left\":\"20px\",\"width\":\"581px\"},attrs:{\"data\":_vm.materials,\"border\":\"\"}},[_c('el-table-column',{attrs:{\"prop\":\"material_id\",\"label\":\"编号\",\"width\":\"100\",\"align\":\"center\",\"show-overflow-tooltip\":true}}),_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":\"名称\",\"width\":\"100\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"prop\":\"size\",\"label\":\"规格\",\"width\":\"100\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"prop\":\"color\",\"label\":\"颜色\",\"width\":\"100\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"prop\":\"count\",\"label\":\"库存\",\"width\":\"100\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"label\":\"查看\",\"id\":\"tool\",\"width\":\"80\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"primary\",\"circle\":\"\",\"size\":\"mini\",\"icon\":\"el-icon-more\"},on:{\"click\":function($event){return _vm.showChanges(scope.row)}}})]}}])})],1),_c('div',{staticStyle:{\"float\":\"left\",\"margin-left\":\"20px\",\"margin-top\":\"50px\"},attrs:{\"id\":\"list-page\"}},[_c('el-pagination',{attrs:{\"current-page\":_vm.currentPage,\"page-sizes\":[5, 10, 15],\"page-size\":_vm.size,\"pager-count\":5,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.count},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1)],1),_c('div',{staticStyle:{\"width\":\"600px\",\"height\":\"450px\",\"float\":\"left\",\"margin-left\":\"30px\"},attrs:{\"id\":\"canvas\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"MaterialStock\">\n    <el-form label-position=\"right\">\n      <div style=\"display: flex; flex-direction: row;margin-left: 5px\">\n        <el-form-item :label=\"'请选择筛选条件'\"\n                      :rules=\"{required: false, message: '请选择物料', trigger: 'change'}\" label-width=\"150px\">\n          <el-cascader placeholder=\"请选择物料\"\n                       :options=\"options\"\n                       @change=\"getMaterialStockByInfo($event)\"\n                       clearable>\n          </el-cascader>\n        </el-form-item>\n      </div>\n    </el-form>\n    <div id=\"list-main\" style=\"float: left;margin-top: 20px\">\n      <el-table :data=\"materials\" border style=\"margin-left: 20px;width: 581px\">\n        <el-table-column prop=\"material_id\" label=\"编号\" width=\"100\" align=\"center\" :show-overflow-tooltip=\"true\"></el-table-column>\n        <el-table-column prop=\"name\" label=\"名称\" width=\"100\" align=\"center\"></el-table-column>\n        <el-table-column prop=\"size\" label=\"规格\" width=\"100\" align=\"center\"></el-table-column>\n        <el-table-column prop=\"color\" label=\"颜色\" width=\"100\" align=\"center\"></el-table-column>\n        <el-table-column prop=\"count\" label=\"库存\" width=\"100\" align=\"center\"></el-table-column>\n        <el-table-column label=\"查看\" id=\"tool\" width=\"80\" align=\"center\">\n          <template slot-scope=\"scope\">\n            <el-button type=\"primary\" circle size=\"mini\" icon=\"el-icon-more\" @click=\"showChanges(scope.row)\"></el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n      <div id=\"list-page\" style=\"float: left;margin-left: 20px;margin-top: 50px\">\n        <el-pagination\n            @size-change=\"handleSizeChange\"\n            @current-change=\"handleCurrentChange\"\n            :current-page=\"currentPage\"\n            :page-sizes=\"[5, 10, 15]\"\n            :page-size=\"size\"\n            :pager-count=\"5\"\n            layout=\"total, sizes, prev, pager, next, jumper\"\n            :total=\"count\">\n        </el-pagination>\n      </div>\n    </div>\n    <div id=\"canvas\" style=\"width: 600px;height:450px;float: left;margin-left: 30px\"></div>\n\n\n  </div>\n\n\n</template>\n\n<script>\nimport {request} from \"@/network/request\";\nexport default {\n  name: \"MaterialStock\",\n  data() {\n    return {\n      currentPage: 1,\n      size: 5,\n      count: 0,\n      material: {\n        name: '',\n        size: '',\n        color: ''\n      },\n      options: [],\n      materials: [],\n      dates: ['开始','结束'],\n      stocks: [0,100],\n      material_id: ''\n    }\n  },\n  methods: {\n    handleSizeChange(val) {\n      this.size = val\n      this.getMaterialStock(this.currentPage, val)\n    },\n    handleCurrentChange(val) {\n      this.currentPage = val\n      this.getMaterialStock(val, this.size)\n    },\n    getMaterialStock(pageOffset,pageSize){\n      request({\n        url: '/dataAnalysis/getMaterialStock',\n        method: 'get',\n        params: {\n          pageOffset: pageOffset,\n          pageSize: pageSize\n        }\n      }).then(res => {\n        this.count = res.data.count\n        this.materials = res.data.materials\n      }).catch(err => {\n        console.log(err)\n      });\n    },\n    getMaterialStockByInfo(event){\n      if(!event[0]) {\n        this.getMaterialStock(this.currentPage,this.size)\n      }else {\n        request({\n          url: '/dataAnalysis/getMaterialStockByInfo',\n          method: 'get',\n          params: {\n            name: event[0],\n            size: event[1],\n            color: event[2]\n          }\n        }).then(res => {\n          this.count = res.data.count\n          this.materials = res.data.materials\n        }).catch(err => {\n          console.log(err)\n        });\n      }\n\n    },\n    getMaterial() {\n      request({\n        url: '/getOptionMaterial',\n        method: 'get',\n      }).then(res => {\n        this.options = res.data\n      }).catch(err => {\n        console.log(err)\n      });\n    },\n    showChanges(row){\n      this.material_id=row.material_id\n      request({\n        url: '/dataAnalysis/getMaterialStockChanges',\n        method: 'get',\n        params: {\n          material_id: this.material_id\n        }\n      }).then(res =>{\n        this.dates = res.data.dates\n        this.stocks = res.data.stocks\n        this.drawChart()\n      }).catch(err =>{\n        console.log(err)\n      })\n    },\n    drawChart() {\n      // 基于准备好的dom，初始化echarts实例\n      let myChart = this.$echarts.getInstanceByDom(document.getElementById(\"canvas\"))\n      if (myChart == null) { // 如果不存在，就进行初始化\n        myChart = this.$echarts.init(document.getElementById(\"canvas\"));\n      }\n      let option = {\n        title: {\n          text: '过去七天物料库存变化',\n          subtext: '物料编号： '+this.material_id\n\n        },\n        tooltip: {\n          trigger: 'axis'\n        },\n        toolbox: {\n          show: true,\n          feature: {\n            dataView: {readOnly: false},\n            saveAsImage: {}\n          }\n        },\n        xAxis: {\n          type: 'category',\n          data: this.dates\n        },\n        yAxis: {\n          type: 'value'\n        },\n        series: [{\n          name: '物料库存',\n          data: this.stocks,\n          type: 'line'\n        }]\n      }\n      // 使用刚指定的配置项和数据显示图表。\n      myChart.setOption(option);\n    }\n\n  },\n  created() {\n    this.getMaterialStock(this.currentPage, this.size)\n    this.getMaterial()\n    this.drawChart()\n  },\n  activated() {\n    this.getMaterialStock(this.currentPage, this.size)\n    this.drawChart()\n\n  }\n}\n</script>\n\n<style scoped>\n#MaterialStock {\n  padding: 50px 50px 0px 50px;\n}\n#list-page {\n  margin-top: 20px;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MaterialStock.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MaterialStock.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MaterialStock.vue?vue&type=template&id=c554f280&scoped=true&\"\nimport script from \"./MaterialStock.vue?vue&type=script&lang=js&\"\nexport * from \"./MaterialStock.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MaterialStock.vue?vue&type=style&index=0&id=c554f280&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c554f280\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MaterialStock.vue?vue&type=style&index=0&id=c554f280&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MaterialStock.vue?vue&type=style&index=0&id=c554f280&scoped=true&lang=css&\""],"sourceRoot":""}