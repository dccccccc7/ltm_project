(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-801e1b58"],{"1bab":function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));n("d3b7");var r=n("bc3a"),s=n.n(r);function o(t){return new Promise((function(e,n){var r=s.a.create({timeout:3e3});r(t).then((function(t){e(t)})).catch((function(t){n(t)}))}))}},"4d63":function(t,e,n){var r=n("83ab"),s=n("da84"),o=n("94ca"),a=n("7156"),i=n("9bf2").f,u=n("241c").f,c=n("44e7"),l=n("ad6d"),f=n("9f7f"),d=n("6eeb"),m=n("d039"),g=n("69f3").set,p=n("2626"),h=n("b622"),v=h("match"),b=s.RegExp,w=b.prototype,y=/a/g,x=/a/g,_=new b(y)!==y,$=f.UNSUPPORTED_Y,k=r&&o("RegExp",!_||$||m((function(){return x[v]=!1,b(y)!=y||b(x)==x||"/a/i"!=b(y,"i")})));if(k){var C=function(t,e){var n,r=this instanceof C,s=c(t),o=void 0===e;if(!r&&s&&t.constructor===C&&o)return t;_?s&&!o&&(t=t.source):t instanceof C&&(o&&(e=l.call(t)),t=t.source),$&&(n=!!e&&e.indexOf("y")>-1,n&&(e=e.replace(/y/g,"")));var i=a(_?new b(t,e):b(t,e),r?this:w,C);return $&&n&&g(i,{sticky:n}),i},E=function(t){t in C||i(C,t,{configurable:!0,get:function(){return b[t]},set:function(e){b[t]=e}})},S=u(b),R=0;while(S.length>R)E(S[R++]);w.constructor=C,C.prototype=w,d(s,"RegExp",C)}p("RegExp")},5060:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return a}));n("d3b7"),n("4d63"),n("ac1f"),n("25f0"),n("5319");var r=n("1bab"),s=n("4360");function o(t,e){if(e.data instanceof Object){var n=s["a"].getters.userinfo;delete n.accessList,console.log(n),e.data.user=s["a"].getters.userinfo}return e.timeout=e.timeout?e.timeout:2500,new Promise((function(n,s){Object(r["a"])(e).then((function(e){var r=e.data.code;if(200===r)n(e);else if(-1===r){var o=e.data.message;t.$message.error(o)}else 100===r&&s(e)})).catch((function(e){t.$message.error("服务器开小差了!")}))}))}function a(t){if(!t)return"";var e=new Date(t);return e.format("yyyy-MM-dd")}Date.prototype.format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var n in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),e)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[n]:("00"+e[n]).substr((""+e[n]).length)));return t}},7156:function(t,e,n){var r=n("861d"),s=n("d2bb");t.exports=function(t,e,n){var o,a;return s&&"function"==typeof(o=e.constructor)&&o!==n&&r(a=o.prototype)&&a!==n.prototype&&s(t,a),t}},7241:function(t,e,n){t.exports=n.p+"static/img/lock.0dd21f5e.svg"},8220:function(t,e,n){t.exports=n.p+"static/img/user2.024a66bb.svg"},a55b:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.isLogin?r("div",[r("div",{staticClass:"tip_box"},[r("h1",[t._v("您已经登录")]),r("h1",[t._v("正在跳转…… "+t._s(t.countNumber))]),r("router-link",{attrs:{to:"main"}},[t._v("点击立刻跳转")])],1)]):r("div",{staticClass:"login_container"},[r("div",{staticClass:"bg"}),r("div",{staticClass:"box_item"},[r("div",{staticClass:"login_box"},[r("div",{staticClass:"title"},[t._v(" 欢迎登录 ")]),r("div",{attrs:{id:"bar"}}),r("div",{staticClass:"form"},[r("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"0px"}},[r("el-form-item",{staticClass:"input_content",attrs:{prop:"username"}},[r("img",{staticClass:"icon",attrs:{src:n("8220"),alt:""}}),r("div",{staticClass:"bar2"}),r("el-autocomplete",{attrs:{size:"large",placeholder:"点我选择测试账号","fetch-suggestions":t.querySearch},on:{select:t.handleSelect},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.item;return[r("div",{staticClass:"name"},[t._v(t._s(n.name+" "+n.value))])]}}],null,!1,1767570309),model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}})],1),r("el-form-item",{staticClass:"input_content",attrs:{prop:"password"}},[r("img",{staticClass:"icon",attrs:{src:n("7241"),alt:""}}),r("div",{staticClass:"bar2"}),r("el-input",{attrs:{"show-password":"",size:"large",placeholder:"点击上面测试账号自动填入密码"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.login(e)}},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),r("el-form-item",{attrs:{"label-width":"0px",id:"login_button"}},[r("el-button",{attrs:{type:"primary"},on:{click:t.login}},[t._v("登录")])],1)],1)],1)])])])},s=[],o=n("5060"),a={name:"Login",data:function(){return{form:{username:"",password:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},countNumber:4,timer:{},isLogin:!1}},methods:{login:function(){var t=this;this.$refs.form.validate((function(e){if(e)return Object(o["a"])(t,{url:"data/login/login",method:"post",data:{user_name:t.form.username,password:t.form.password}}).then((function(e){t.$message.success("登录成功！"),console.log(e.data.userinfo),t.$store.commit("login/SET_USERINFO",e.data.userinfo),console.log(t.$store.getters.userinfo),window.sessionStorage.setItem("userinfo",JSON.stringify(e.data.userinfo)),t.$store.getters.userinfo&&t.$router.push("/main")})).catch((function(e){t.reset(),t.$message.error("用户名或密码错误！")}))}))},reset:function(){this.$refs.form.resetFields()},handleSelect:function(t){this.form.password="100001"},querySearch:function(t,e){e([{value:"admin",name:"超级管理测试"},{value:"100002",name:"分析报表权限"},{value:"100003",name:"生产过程权限"},{value:"100004",name:"质量管理权限"}])}},activated:function(){var t=this,e=null!=window.sessionStorage.getItem("userinfo");this.countNumber=4,e&&(this.timer=setInterval((function(){t.countNumber--,0===t.countNumber&&t.$router.push("/main")}),1e3)),this.isLogin=e},beforeRouteLeave:function(t,e,n){clearInterval(this.timer),n()},beforeDestroy:function(){this.timer&&clearInterval(this.timer)}},i=a,u=(n("d6db"),n("2877")),c=Object(u["a"])(i,r,s,!1,null,null,null);e["default"]=c.exports},d6db:function(t,e,n){"use strict";var r=n("e67a"),s=n.n(r);s.a},e67a:function(t,e,n){}}]);
//# sourceMappingURL=chunk-801e1b58.3f16c547.js.map