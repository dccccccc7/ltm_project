(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6c052b14"],{"06ce":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"mainDiv"}},[a("div",{attrs:{id:"header"}},[a("div",{staticClass:"headerRight"},[a("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){e.submitDialog=!0}}},[e._v(" 删 除 ")]),a("el-dialog",{attrs:{title:"提示",visible:e.submitDialog,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.submitDialog=t}}},[a("span",[e._v("是否删除该车间")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.submitDialog=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.delWrokshop}},[e._v("确 定")])],1)])],1)]),a("div",{staticClass:"subMain"},[a("div",{staticClass:"item"},[a("span",[e._v("车间编号:")]),a("div",{staticClass:"inputBox"},[a("el-input",{attrs:{placeholder:e.workshopInfo.id,clearable:""},model:{value:e.workshop.workshopId,callback:function(t){e.$set(e.workshop,"workshopId",t)},expression:"workshop.workshopId"}})],1)]),a("div",{staticClass:"item"},[a("span",[e._v("车间名称:")]),a("div",{staticClass:"inputBox"},[a("el-input",{attrs:{placeholder:e.workshopInfo.name,clearable:""},model:{value:e.workshop.workshopName,callback:function(t){e.$set(e.workshop,"workshopName",t)},expression:"workshop.workshopName"}})],1)]),a("div",{staticClass:"item"},[a("span",[e._v("工厂名称:")]),a("div",{staticClass:"inputBox"},[a("el-input",{attrs:{placeholder:e.workshopInfo.factory_name,clearable:""},model:{value:e.workshop.factory_name,callback:function(t){e.$set(e.workshop,"factory_name",t)},expression:"workshop.factory_name"}})],1),a("el-button",{attrs:{plain:""},on:{click:function(t){return e.submitToUpdate()}}},[e._v("修 改")]),a("el-button",{attrs:{plain:""},on:{click:function(t){e.addDialog=!0}}},[e._v("增加产线")]),a("el-dialog",{attrs:{title:"增加产线",visible:e.addDialog,width:"25%","before-close":e.handleClose},on:{"update:visible":function(t){e.addDialog=t}}},[a("el-form",{ref:"newLineName",staticClass:"demo-dynamic",attrs:{model:e.newLineName,"label-width":"100px"}},[a("el-form-item",{staticStyle:{width:"80%"},attrs:{prop:"newLineId",label:"产线编号",size:"100px",rules:[{required:!0,message:"请输入产线编号",trigger:"blur"}]}},[a("el-input",{model:{value:e.newLineName.newLineId,callback:function(t){e.$set(e.newLineName,"newLineId",t)},expression:"newLineName.newLineId"}})],1),a("el-form-item",{staticStyle:{width:"80%"},attrs:{prop:"newLineName",label:"产线名称",size:"100px",rules:[{required:!0,message:"请输入产线名称",trigger:"blur"}]}},[a("el-input",{model:{value:e.newLineName.newLineName,callback:function(t){e.$set(e.newLineName,"newLineName",t)},expression:"newLineName.newLineName"}})],1),a("el-form-item",{staticStyle:{width:"80%"},attrs:{prop:"newLineRouting",label:"产线工艺",size:"100px",rules:[{required:!0,message:"请输入产线工艺",trigger:"blur"}]}},[a("el-input",{model:{value:e.newLineName.newLineRouting,callback:function(t){e.$set(e.newLineName,"newLineRouting",t)},expression:"newLineName.newLineRouting"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("newLineName")}}},[e._v("提交")]),a("el-button",{on:{click:function(t){e.addDialog=!1}}},[e._v("取 消")])],1)],1)],1)],1)]),a("div",{staticStyle:{width:"100%",height:"40px",display:"flex","background-color":"whitesmoke"}}),a("div",{staticClass:"subMainA",attrs:{id:"main"}},e._l(e.workshopInfo.lines,(function(t,n){return a("div",{staticClass:"itemA"},[a("el-card",{staticClass:"box-card",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v(e._s("产线工艺:"+t.routing))]),a("el-button",{staticStyle:{width:"10%"},attrs:{type:"text"},on:{click:function(t){e.editLineName[n].flag=!0}}},[e._v(e._s(t.name))])],1),a("el-dialog",{attrs:{title:"提示",visible:e.editLineName[n].flag,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){return e.$set(e.editLineName[n],"flag",t)}}},[a("el-form",{ref:"updateLineName",refInFor:!0,staticClass:"demo-ruleForm",attrs:{model:e.updateLineName,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"产线名称",prop:"newLineName",rules:[{required:!0,message:"产线名称不能为空"}]}},[a("el-input",{attrs:{type:"age",autocomplete:"off"},model:{value:e.updateLineName.newLineName,callback:function(t){e.$set(e.updateLineName,"newLineName",e._n(t))},expression:"updateLineName.newLineName"}})],1),a("el-form-item",{attrs:{label:"产线工艺",prop:"newLineRouting",rules:[{required:!0,message:"产线工艺不能为空"}]}},[a("el-input",{attrs:{type:"age",autocomplete:"off"},model:{value:e.updateLineName.newLineRouting,callback:function(t){e.$set(e.updateLineName,"newLineRouting",e._n(t))},expression:"updateLineName.newLineRouting"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(a){return e.updatetheLineName("updateLineName",e.workshopInfo.id,t.id,n)}}},[e._v("修改")])],1)],1)],1),a("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],staticStyle:{float:"right",padding:"3px 3px","margin-left":"6px"},attrs:{icon:"el-icon-close",circle:""},on:{click:function(a){return e.delLine(e.workshopInfo.id,t.id)}}}),a("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],staticStyle:{float:"right",padding:"3px 3px"},attrs:{icon:"el-icon-plus",circle:""},on:{click:function(t){return e.shouwAddStaDialog(n)}}}),a("el-dialog",{attrs:{title:"增加工位",visible:e.addStationDialogs[n].flag,width:"25%","before-close":e.handleClose},on:{"update:visible":function(t){return e.$set(e.addStationDialogs[n],"flag",t)}}},[a("el-form",{ref:"addStationInfo",refInFor:!0,staticClass:"demo-ruleForm",attrs:{model:e.addStationInfo,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"工位编号",prop:"stationId",rules:[{required:!0,message:"工位编号不能为空"}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.addStationInfo.stationId,callback:function(t){e.$set(e.addStationInfo,"stationId",t)},expression:"addStationInfo.stationId"}})],1),a("el-form-item",{attrs:{label:"工位位序",prop:"staOrd",rules:[{required:!0,message:"工位位序不能为空"}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.addStationInfo.staOrd,callback:function(t){e.$set(e.addStationInfo,"staOrd",e._n(t))},expression:"addStationInfo.staOrd"}})],1),a("el-form-item",{attrs:{label:"工人编号",prop:"user",rules:[{required:!0,message:"工人编号不能为空"}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.addStationInfo.user,callback:function(t){e.$set(e.addStationInfo,"user",t)},expression:"addStationInfo.user"}})],1),a("el-form-item",{attrs:{label:"设备编号",prop:"staEqu",rules:[{required:!0,message:"设备编号不能为空"}]}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.addStationInfo.staEqu,callback:function(t){e.$set(e.addStationInfo,"staEqu",t)},expression:"addStationInfo.staEqu"}})],1),a("el-form-item",[a("el-button",{on:{click:function(a){return e.addAStation("addStationInfo",e.workshopInfo.id,t.id,n)}}},[e._v("提交")]),a("el-button",{on:{click:function(t){return e.notShowAddStatinDialog(n)}}},[e._v("取 消")])],1)],1)],1)],1),a("div",{staticStyle:{overflow:"auto",height:"300px"}},e._l(t.stations,(function(i,o){return a("div",{staticClass:"text item",staticStyle:{display:"flex","justify-content":"space-around",width:"inherit"}},[a("div",[a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v(e._s("工位编号 : "+i.id+" 工位位序 : "+i.stationOrder)+" "),a("br"),e._v(e._s("设备编号 : "+i.equip_id+" 工人编号 : "+i.user))]),a("el-button",{staticStyle:{width:"10%"},attrs:{type:"text"},on:{click:function(t){return e.showEditStation(n,o)}}},[e._v(e._s(i.id+"-工位"+o))])],1)],1),a("div",{staticStyle:{display:"flex","align-self":"end"}},[a("el-dialog",{attrs:{title:"修改信息",visible:e.tryflag[n][o].flag,width:"25%","before-close":e.handleClose},on:{"update:visible":function(t){return e.$set(e.tryflag[n][o],"flag",t)}}},[a("el-form",{ref:"newStation",refInFor:!0,staticClass:"demo-dynamic",attrs:{model:e.newStation,rules:e.rules,"label-width":"100px"}},[a("div",{staticStyle:{width:"inherit"}},[a("el-form-item",{staticStyle:{width:"80%"},attrs:{label:"工位位序",size:"100px",prop:"staOrder",rules:[{required:!0,message:"工位位序不可为空",trigger:"blur"},{type:"number",message:"工位位序必须为数字",trigger:"blur"},{type:"number",min:1,max:t.stationNum,message:"工位必须小于"+t.stationNum}]}},[a("el-input",{staticStyle:{width:"82%"},model:{value:e.newStation.staOrder,callback:function(t){e.$set(e.newStation,"staOrder",e._n(t))},expression:"newStation.staOrder"}})],1),a("el-form-item",{staticStyle:{width:"80%"},attrs:{label:"工位编号",prop:"id",rules:{required:!0,message:"设备编号不可为空",trigger:"blur"}}},[a("el-input",{staticStyle:{width:"82%"},model:{value:e.newStation.id,callback:function(t){e.$set(e.newStation,"id",t)},expression:"newStation.id"}})],1),a("el-form-item",{staticStyle:{width:"80%"},attrs:{label:"设备编号",prop:"staEqu",rules:{required:!0,message:"设备编号不可为空",trigger:"blur"}}},[a("el-input",{staticStyle:{width:"82%"},model:{value:e.newStation.staEqu,callback:function(t){e.$set(e.newStation,"staEqu",t)},expression:"newStation.staEqu"}})],1),a("el-form-item",{staticStyle:{width:"80%"},attrs:{label:"工人编号",prop:"user",rules:{required:!0,message:"工人编号不可为空",trigger:"blur"}}},[a("el-input",{staticStyle:{width:"82%"},model:{value:e.newStation.user,callback:function(t){e.$set(e.newStation,"user",t)},expression:"newStation.user"}})],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(a){return e.updateFormAddSta("newStation",e.workshopInfo.id,t.id,i.id,n,o)}}},[e._v("提交")])],1)],1)],1),a("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{size:"mini",icon:"el-icon-delete",type:"text",circle:""},on:{click:function(a){return e.delStation(e.workshopInfo.id,t.id,i.id)}}})],1)])})),0)])],1)})),0)])},i=[],o=a("1bab"),s=a("4791"),r=(a("20d1"),{data:function(){return{transferId:"",transferName:"",linOrder:"",linName:"",submitDialog:!1,staOrder:"",staEqu:"",staEquName:"",addStationInfo:{stationId:"",staOrd:"",user:"",staEqu:""},newStation:{staOrder:"",user:"",staEqu:"",id:"",staName:"",staEquName:""},updateLineName:{newLineName:"",newLineRouting:""},newLineOrder:"",newLineName:{newLineName:"",newLineId:"",newLineRouting:""},showDialog:!1,editLineName:[],isDisabled:!0,workshopInfo:"",dialogFormVisible:!1,lineName:"",formLabelWidth:"80px",fullscreenLoading:!1,addStationDialog:!1,addStationDialogs:[],addStationfiags:0,stationInfo:[],tryflag:[],showEditDialog:!1,addDialog:!1,nowShopworkId:"",workshop:{workshopId:"",workshopName:"",factory_name:""},rules:{}}},name:"workshopDetail",created:function(){this.nowShopworkId=this.$route.query.workshopId,this.getData()},updated:function(){},methods:{getData:function(){var e=this,t={workshopId:this.nowShopworkId};console.log("...",t),Object(s["a"])({url:"workshop/mainInfo",method:"get",params:t}).then((function(t){console.log("getData:",t),!0===t.data.success?e.workshopInfo=t.data.result:e.$message.error("服务器异常"),console.log("返回的结果",t)})).catch((function(t){e.$message.error("服务器异常")})),this.addStationfiags=10;for(var a=0;a<10;a++)this.addStationDialogs.push({flag:!1}),this.editLineName.push({flag:!1});for(var n=0;n<20;n++){this.stationInfo.push([]),this.tryflag.push([]);for(var i=0;i<20;i++)this.stationInfo[n].push({flag:!1}),this.tryflag[n].push({flag:!1})}},delWrokshop:function(){var e=this,t={workshopId:this.nowShopworkId};Object(o["a"])({url:"workshop/delete",params:t,method:"get"}).then((function(t){console.log(t,"删除"),!0===t.data.success?(e.$message({type:"success",message:"申请成功"}),e.$router.go(-1)):(e.$message({type:"error",message:"申请失败"}),e.submitDialog=!1)})).catch((function(t){e.$message.error("服务器异常"),e.submitDialog=!1}))},delLine:function(e,t){var a=this;this.fullscreenLoading=!0;var n={workshopId:e,lineId:t};console.log("删除产线",n),Object(s["a"])({url:"line/delete",params:n,method:"get"}).then((function(e){a.fullscreenLoading=!1,!0===e.data.success?a.$message({type:"success",message:"申请成功"}):a.$message.error("申请失败"),console.log("删除产线::::::",e)})).catch((function(e){a.fullscreenLoading=!1,a.$message.error("服务器异常")}))},addLine:function(e,t,a,n){var i=this;this.fullscreenLoading=!0,this.addDialog=!1;var o={workshopId:e,lineName:a,lineId:t,routing:n};Object(s["a"])({url:"line/create",params:o,method:"get"}).then((function(e){console.log("增加产线：",e),i.fullscreenLoading=!1,i.$message({message:"申请成功"})})).catch((function(e){i.fullscreenLoading=!1,i.$message.error("申请失败")}))},shouwAddStaDialog:function(e){this.addStationDialogs[e].flag=!0},notShowAddStatinDialog:function(e){this.addStationDialogs[e].flag=!1},updatetheLineName:function(e,t,a,n){var i=this;this.$refs[e][n].validate((function(e){if(!e)return!1;var n={workshopId:t,lineId:a,newName:i.updateLineName.newLineName,routing:i.updateLineName.newLineRouting};console.log("修改产线名：",n),Object(s["a"])({url:"line/update",method:"get",params:n}).then((function(e){console.log("修改产线名：",e),!0===e.data.success?i.$message({type:"success",message:"申请成功"}):i.$message.error("申请失败")})).catch((function(e){i.$message.error("服务器异常")}))})),this.editLineName[n].flag=!1},addAStation:function(e,t,a,n){var i=this;this.$refs[e][0].validate((function(e){if(!e)return!1;i.notShowAddStatinDialog(n),i.fullscreenLoading=!0,i.addStationDialog=!1;var s={workshopId:t,lineId:a,stationId:i.addStationInfo.stationId,staOrd:i.addStationInfo.staOrd,user:i.addStationInfo.user,staEqu:i.addStationInfo.staEqu};Object(o["a"])({url:"station/create",params:s,method:"get"}).then((function(e){i.fullscreenLoading=!1,i.workshopInfo=e.deta,i.$message({message:"申请成功"})})).catch((function(e){i.fullscreenLoading=!1,i.$message.error("申请失败")})),i.fullscreenLoading=!1}))},delStation:function(e,t,a){var n=this;this.fullscreenLoading=!0;var i={workshopId:e,lineId:t,stationId:a};Object(o["a"])({url:"station/delete",params:i,method:"get"}).then((function(e){n.fullscreenLoading=!1,!0===e.data.success?n.$message({message:"申请成功"}):n.$message.error("申请失败")})).catch((function(e){n.fullscreenLoading=!1,n.$message.error("申请失败")}))},showEditStation:function(e,t){this.stationInfo[e][t].flag=!0,this.tryflag[e][t].flag=!0},notShowEditStation:function(e,t){this.tryflag[e][t].flag=!1},editStation:function(e,t,a,n,i){var o=this;this.notShowEditStation(n,i),this.fullscreenLoading=!0,this.fullscreenLoading=!0,this.showEditDialog=!1;var r={workshopId:e,lineId:t,stationId:a,staOrd:this.newStation.staOrder,user:this.newStation.user,staEqu:this.newStation.staEqu,id:this.newStation.id};Object(s["a"])({url:"station/update",params:r,method:"get"}).then((function(e){o.fullscreenLoading=!1,o.$message({message:"申请成功"})})).catch((function(e){o.fullscreenLoading=!1,o.$message.error("服务器异常")}))},handleClose:function(e){this.$confirm("确认关闭？").then((function(t){e()})).catch((function(e){}))},submitToUpdate:function(){var e=this,t={workshopId:this.workshopInfo.id,newWorkshopId:this.workshop.workshopId,newWorkshopName:this.workshop.workshopName,newFactory:this.workshop.factory_name};console.log("reqqq,",t),Object(s["a"])({url:"workshop/update",params:t,method:"get"}).then((function(t){!0===t.data.success?e.$message({type:"success",message:"申请成功"}):e.$message.error("申请失败"),console.log("修改：",t)})).catch((function(t){e.$message.error("服务器异常")}))},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return t.$message.error("提交失败"),!1;t.addLine(t.nowShopworkId,t.newLineName.newLineId,t.newLineName.newLineName,t.newLineName.newLineRouting)}))},updateFormAddSta:function(e,t,a,n,i,o){var s=this;this.$refs[e][0].validate((function(r){if(!r)return s.$message.error("提交失败"),!1;s.editStation(t,a,n,i,o),s.$refs[e][i].resetFields()}))}}}),l=r,d=(a("ff85"),a("2877")),u=Object(d["a"])(l,n,i,!1,null,"2114aa87",null);t["default"]=u.exports},"1bab":function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));a("d3b7");var n=a("bc3a"),i=a.n(n);function o(e){return new Promise((function(t,a){var n=i.a.create({timeout:3e3});n(e).then((function(e){t(e)})).catch((function(e){a(e)}))}))}},"20d1":function(e,t,a){"use strict";a("d3b7"),a("4f6c"),a("bc3a")},"30c5":function(e,t,a){},4791:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));a("d3b7"),a("4f6c");var n=a("bc3a"),i=a.n(n);function o(e){return new Promise((function(t,a){var n=i.a.create({timeout:45e3});n(e).then((function(e){console.log("成功"),t(e)})).catch((function(e){console.log("失败"),a(e)}))}))}},"4f6c":function(e,t,a){"use strict"},ff85:function(e,t,a){"use strict";var n=a("30c5"),i=a.n(n);i.a}}]);
//# sourceMappingURL=chunk-6c052b14.728a1159.js.map