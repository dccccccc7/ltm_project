{"version":3,"sources":["webpack:///./src/network/request.js","webpack:///./src/views/production_process/production/Add.vue?a2e8","webpack:///./src/views/production_process/production/Add.vue?8f36","webpack:///src/views/production_process/production/Add.vue","webpack:///./src/views/production_process/production/Add.vue?921e","webpack:///./src/views/production_process/production/Add.vue"],"names":["request","config","Promise","resolve","reject","instance","axios","create","timeout","then","res","catch","err","render","_vm","this","_h","$createElement","_c","_self","attrs","staticStyle","active","key","ref","product","process","material","disabled","on","next","_v","_s","next_text","directives","name","rawName","value","expression","previous","staticRenderFns","data","previous_show","path","methods","child","submitForm","addProduct","$router","push","brand","season","type","customer_id","company_id","color","comments","addProcess","addMaterial","init","addCommit","url","method","operator_id","$store","getters","userinfo","id","message","setTimeout","created","activated","component"],"mappings":"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","file":"static/js/chunk-11451f85.6a658f63.js","sourcesContent":["import axios from 'axios'\n\n// axios.interceptors.request.use(config => {\n//   console.log(config)\n//   // 必须返回请求，否则后端无法获得\n//   return config\n// }, err => {\n//   console.log(err)\n// })\n\nexport function request(config) {\n    return new Promise(((resolve, reject) => {\n\n        const instance = axios.create({\n            timeout: 3000,\n        });\n\n        instance(config).then(res => {\n            resolve(res);\n        }).catch(err => {\n            reject(err);\n        })\n    }))\n}\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Add.vue?vue&type=style&index=0&id=f8d793b8&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Add.vue?vue&type=style&index=0&id=f8d793b8&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-container',{attrs:{\"id\":\"base\"}},[_c('el-header',{staticStyle:{\"margin-top\":\"50px\"}},[_c('el-steps',{attrs:{\"active\":_vm.active,\"finish-status\":\"success\"}},[_c('el-step',{attrs:{\"title\":\"添加产品\"}}),_c('el-step',{attrs:{\"title\":\"分配工艺路线\"}}),_c('el-step',{attrs:{\"title\":\"填写物料清单\"}}),_c('el-step',{attrs:{\"title\":\"提交\"}})],1)],1),_c('el-main',{key:_vm.key,staticStyle:{\"margin\":\"50px 70px 20px 20px\",\"padding\":\"0px 20px 20px 20px\"}},[_c('transition',{attrs:{\"mode\":\"out-in\",\"name\":\"fade-transform\"}},[_c('keep-alive',[_c('router-view',{ref:\"add\",staticStyle:{\"height\":\"400px\"},attrs:{\"product\":_vm.product,\"process\":_vm.process,\"material\":_vm.material}})],1)],1)],1),_c('el-footer',{attrs:{\"id\":\"bottom\"}},[_c('el-button',{staticStyle:{\"margin-top\":\"12px\"},attrs:{\"disabled\":_vm.disabled},on:{\"click\":_vm.next}},[_vm._v(_vm._s(_vm.next_text))]),_c('el-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.previous_show),expression:\"previous_show\"}],staticStyle:{\"margin-top\":\"12px\"},on:{\"click\":_vm.previous}},[_vm._v(\"上一步\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <el-container id=\"base\">\n    <!-- 步骤条 -->\n    <el-header style=\"margin-top: 50px\">\n      <el-steps :active=\"active\" finish-status=\"success\">\n        <el-step title=\"添加产品\"></el-step>\n        <el-step title=\"分配工艺路线\"></el-step>\n        <el-step title=\"填写物料清单\"></el-step>\n        <el-step title=\"提交\"></el-step>\n      </el-steps>\n    </el-header>\n\n    <el-main style=\"margin: 50px 70px 20px 20px;padding: 0px 20px 20px 20px;\" :key=\"key\">\n      <transition mode=\"out-in\" name=\"fade-transform\">\n        <keep-alive>\n          <!-- 添加产品 -->\n          <router-view ref=\"add\" style=\"height: 400px\"\n                       :product=\"product\" :process=\"process\" :material=\"material\"></router-view>\n        </keep-alive>\n      </transition>\n    </el-main>\n\n    <el-footer id=\"bottom\">\n      <el-button style=\"margin-top: 12px;\" @click=\"next\" :disabled=\"disabled\">{{next_text}}</el-button>\n      <el-button v-show=\"previous_show\" style=\"margin-top: 12px;\" @click=\"previous\">上一步</el-button>\n    </el-footer>\n  </el-container>\n</template>\n\n<script>\nimport {request} from \"@/network/request\";\n\nexport default {\n  name: \"Add\",\n  data() {\n    return {\n      active: 0,\n      next_text: \"下一步\",\n      disabled: false,\n      previous_show: false,\n      product: {},\n      process: [],\n      material: [],\n      path: ['product', 'process', 'material', 'ensure'],\n      key: 0\n    }\n  },\n  methods: {\n    next() {\n      // 在添加产品页面点击下一步\n      // 需要先对输入进行验证，通过才可以进入下一步\n      // 设置路径为process，并显示上一步按钮\n      if (this.active == 0) {\n        let child = this.$refs.add\n        if (child.submitForm()) {\n          this.active++\n          this.addProduct()\n          this.previous_show = true\n          this.$router.push(this.path[this.active])\n        }\n      }\n      // 在添加工艺路线页面点击下一步\n      else if (this.active == 1) {\n        let child = this.$refs.add\n        if (child.submitForm()) {\n          this.active++\n          this.addProcess()\n          this.$router.push(this.path[this.active])\n        }\n      }\n      // 在物料清单页面点击下一步\n      else if (this.active == 2) {\n        let child = this.$refs.add\n        if (child.submitForm()) {\n          this.active++\n          this.next_text = \"完成\"\n          this.addMaterial()\n          this.$router.push(this.path[this.active])\n        }\n      }\n      else {\n        this.addCommit()\n      }\n    },\n    previous() {\n      // 在添加产品页点击上一步\n      // 隐藏上一步按钮\n      if (this.active == 1) {\n        this.active--\n        this.previous_show = false\n        this.$router.push(this.path[this.active])\n      }\n      // 在提交页面点击上一步\n      // 修改完成按钮为下一步\n      else if (this.active == 3) {\n        this.active--\n        this.next_text = '下一步'\n        this.$router.push(this.path[this.active])\n      }\n      else {\n        this.active--\n        this.$router.push(this.path[this.active])\n      }\n    },\n    addProduct() {\n      let product = this.$refs.add.product\n      this.product.brand = product.brand\n      this.product.season = product.season\n      this.product.type = product.type\n      this.product.customer_id = product.customer_id\n      this.product.company_id = product.company_id\n      this.product.color = product.color\n      this.product.comments = product.comments\n    },\n    addProcess() {\n      let process = this.$refs.add.process\n      this.process = process\n    },\n    addMaterial() {\n      let material = this.$refs.add.material\n      this.material = material.data\n    },\n    init() {\n      this.active = 0\n      this.previous_show = false\n      this.disabled = false\n      this.next_text = \"下一步\"\n      this.key++\n      this.$router.push(this.path[0])\n    },\n    addCommit() {\n      request({\n        url: '/process/add',\n        method: 'post',\n        data: {\n          operator_id: this.$store.getters.userinfo.id,\n          product: this.product,\n          process: this.process,\n          material: this.material\n        }\n      }).then(res => {\n        if (res.data == \"添加成功\") {\n          this.$message({\n            type: 'success',\n            message: '添加成功'\n          })\n          this.disabled = true\n          this.active++\n          setTimeout(() => {\n            this.init()\n          }, 1000)\n        } else {\n          this.$message({\n            type: 'error',\n            message: res.data\n          })\n        }\n      }).catch(err => {\n        this.$message({\n          type: 'error',\n          message: '网络错误，添加失败'\n        })\n      });\n    }\n  },\n  created() {\n    this.$router.push(this.path[0])\n  },\n  activated() {\n    this.init()\n  }\n}\n</script>\n\n<style scoped>\n#base {\n  text-align: left;\n  padding: 0px 5% 0px 50px;\n  margin-right: 25%;\n}\n\n#bottom {\n  display: flex;\n  justify-content: space-between;\n  flex-direction: row-reverse;\n}\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Add.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Add.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Add.vue?vue&type=template&id=f8d793b8&scoped=true&\"\nimport script from \"./Add.vue?vue&type=script&lang=js&\"\nexport * from \"./Add.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Add.vue?vue&type=style&index=0&id=f8d793b8&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f8d793b8\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}